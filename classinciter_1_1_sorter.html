<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>inciter::Sorter class | Quinoa docs</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400i,600,600i%7CSource+Code+Pro:400,400i,600" />
  <link rel="stylesheet" href="quinoa.m-dark-noindent+doxygen.compiled.css" />
  <link rel="icon" href="quinoa_sum.png" type="image/png" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#22272e" />
</head>
<body>
<header><nav id="navigation">
  <div class="m-container">
    <div class="m-row">
      <a href="index.html" id="m-navbar-brand" class="m-col-t-8 m-col-m-none m-left-m">Quinoa <span class="m-thin">docs</span></a>
      <div class="m-col-t-4 m-hide-m m-text-right m-nopadr">
        <a href="#search" class="m-dox-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
          <path d="m6 0c-3.3144 0-6 2.6856-6 6 0 3.3144 2.6856 6 6 6 1.4858 0 2.8463-0.54083 3.8945-1.4355-0.0164 0.33797 0.14734 0.75854 0.5 1.1504l3.2227 3.7891c0.55185 0.6139 1.4517 0.66544 2.002 0.11524 0.55022-0.55022 0.49866-1.4501-0.11524-2.002l-3.7891-3.2246c-0.39184-0.35266-0.81242-0.51469-1.1504-0.5 0.89472-1.0482 1.4355-2.4088 1.4355-3.8945 0-3.3128-2.6856-5.998-6-5.998zm0 1.5625a4.4375 4.4375 0 0 1 4.4375 4.4375 4.4375 4.4375 0 0 1-4.4375 4.4375 4.4375 4.4375 0 0 1-4.4375-4.4375 4.4375 4.4375 0 0 1 4.4375-4.4375z"/>
        </svg></a>
        <a id="m-navbar-show" href="#navigation" title="Show navigation"></a>
        <a id="m-navbar-hide" href="#" title="Hide navigation"></a>
      </div>
      <div id="m-navbar-collapse" class="m-col-t-12 m-show-m m-col-m-none m-right-m">
        <div class="m-row">
          <ol class="m-col-t-6 m-col-m-none">
            <li><a href="why.html">Why</a></li>
            <li>
              <a href="build.html">Build</a>
              <ol>
                <li><a href="git_submodules_subtrees.html">Modules</a></li>
                <li><a href="licenses.html">Libraries</a></li>
                <li><a href="build_system.html">Internals</a></li>
              </ol>
            </li>
            <li>
              <a href="https://quinoacomputing.github.io/index.html#mainpage_tools">Tools</a>
              <ol>
                <li><a href="inciter_main.html">Inciter</a></li>
                <li><a href="unittest_main.html">UnitTest</a></li>
                <li><a href="meshconv_main.html">MeshConv</a></li>
              </ol>
            </li>
            <li><a href="namespaces.html">Namespaces</a></li>
            <li><a href="annotated.html">Classes</a></li>
            <li><a href="files.html">Files</a></li>
          </ol>
          <ol class="m-col-t-6 m-col-m-none" start="7">
            <li>
              <a href="resources.html">Resources</a>
              <ol>
                <li><a href="https://github.com/quinoacomputing/quinoa">GitHub</a></li>
                <li><a href="papers.html">Publications</a></li>
                <li><a href="https://github.com/quinoacomputing/quinoa/blob/master/LICENSE">License</a></li>
                <li><a href="roadmap.html">Roadmap</a></li>
                <li><a href="contributing.html">Contributing</a></li>
                <li><a href="coverage.html">Coverage</a></li>
                <li><a href="https://github.com/quinoacomputing/quinoa/releases">Tarballs</a></li>
                <li><a href="https://bestpractices.coreinfrastructure.org/projects/2120">Practices</a></li>
              </ol>
            </li>
            <li class="m-show-m"><a href="#search" class="m-dox-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
              <path d="m6 0c-3.3144 0-6 2.6856-6 6 0 3.3144 2.6856 6 6 6 1.4858 0 2.8463-0.54083 3.8945-1.4355-0.0164 0.33797 0.14734 0.75854 0.5 1.1504l3.2227 3.7891c0.55185 0.6139 1.4517 0.66544 2.002 0.11524 0.55022-0.55022 0.49866-1.4501-0.11524-2.002l-3.7891-3.2246c-0.39184-0.35266-0.81242-0.51469-1.1504-0.5 0.89472-1.0482 1.4355-2.4088 1.4355-3.8945 0-3.3128-2.6856-5.998-6-5.998zm0 1.5625a4.4375 4.4375 0 0 1 4.4375 4.4375 4.4375 4.4375 0 0 1-4.4375 4.4375 4.4375 4.4375 0 0 1-4.4375-4.4375 4.4375 4.4375 0 0 1 4.4375-4.4375z"/>
            </svg></a></li>
          </ol>
        </div>
      </div>
    </div>
  </div>
</nav></header>
<main><article>
  <div class="m-container m-container-inflatable">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <h1>
          <span class="m-breadcrumb"><a href="namespaceinciter.html">inciter</a>::<wbr/></span>Sorter <span class="m-thin">class</span>
        </h1>
        <p>Mesh sorter for global distributed mesh node reordering.</p>
        <div class="m-block m-default">
          <h3>Contents</h3>
          <ul>
            <li>
              Reference
              <ul>
                <li><a href="#pub-static-methods">Public static functions</a></li>
                <li><a href="#typeless-methods">Constructors, destructors, conversion operators</a></li>
                <li><a href="#pub-methods">Public functions</a></li>
                <li><a href="#charm-packunpack-serializer-member-functions">Charm++ pack/unpack serializer member functions</a></li>
              </ul>
            </li>
          </ul>
        </div>
        <section id="pub-static-methods">
          <h2><a href="#pub-static-methods">Public static functions</a></h2>
          <dl class="m-dox">
            <dt>
              <span class="m-dox-wrap-bumper">static void <a href="#ab7ef51ac4cc58c7b02e6865bc0343e01" class="m-dox-self" name="ab7ef51ac4cc58c7b02e6865bc0343e01">registerReducers</a>(</span><span class="m-dox-wrap">)</span>
            </dt>
            <dd>Configure Charm++ reduction types.</dd>
          </dl>
        </section>
        <section id="typeless-methods">
          <h2><a href="#typeless-methods">Constructors, destructors, conversion operators</a></h2>
          <dl class="m-dox">
            <dt>
              <span class="m-dox-wrap-bumper"><a href="#a9c5c0dfc32bcd49db7bf4a708a613502" class="m-dox">Sorter</a>(</span><span class="m-dox-wrap">std::size_t meshid,
              const CProxy_Transporter&amp; transporter,
              const tk::CProxy_MeshWriter&amp; meshwriter,
              const <a href="namespacetk.html#a42b962beda9ad3f300a4fc5a06709449" class="m-dox">tk::<wbr />SorterCallback</a>&amp; cbs,
              const std::vector&lt;<a href="classinciter_1_1_scheme.html" class="m-dox">Scheme</a>&gt;&amp; scheme,
              CkCallback reorderRefiner,
              const std::vector&lt;std::size_t&gt;&amp; ginpoel,
              const <a href="classtk_1_1_uns_mesh.html#a4b2d1f8043c0354b11461c118a4379c5" class="m-dox">tk::<wbr />UnsMesh::<wbr />CoordMap</a>&amp; coordmap,
              const <a href="classtk_1_1_uns_mesh.html#a87277adba5b6fc23035adcd8dd6cb0e5" class="m-dox">tk::<wbr />UnsMesh::<wbr />Chunk</a>&amp; el,
              const std::map&lt;int, std::vector&lt;std::size_t&gt;&gt;&amp; bface,
              const std::vector&lt;std::size_t&gt;&amp; triinpoel,
              const std::map&lt;int, std::vector&lt;std::size_t&gt;&gt;&amp; bnode,
              const std::unordered_map&lt;std::size_t, std::set&lt;std::size_t&gt;&gt;&amp; elemblockid,
              int nchare) <span class="m-label m-flat m-info">explicit</span> </span>
            </dt>
            <dd>Constructor.</dd>
            <dt>
              <span class="m-dox-wrap-bumper"><a href="#aea74844f081d006d9a3b20591b249d42" class="m-dox-self" name="aea74844f081d006d9a3b20591b249d42">Sorter</a>(</span><span class="m-dox-wrap">CkMigrateMessage*) <span class="m-label m-flat m-info">explicit</span> </span>
            </dt>
            <dd>Migrate constructor.</dd>
          </dl>
        </section>
        <section id="pub-methods">
          <h2><a href="#pub-methods">Public functions</a></h2>
          <dl class="m-dox">
            <dt>
              <span class="m-dox-wrap-bumper">void <a href="#a55d67ca219f06c2ebdd9e631fe5e298a" class="m-dox">setup</a>(</span><span class="m-dox-wrap">std::size_t npoin)</span>
            </dt>
            <dd>Setup chare mesh boundary node communication map.</dd>
            <dt>
              <span class="m-dox-wrap-bumper">void <a href="#a183ef036d19c3c6ab4450bc56748b196" class="m-dox">query</a>(</span><span class="m-dox-wrap">int fromch,
              const <a href="namespacetk.html#a75788bc5ea5dc638a5981d8b8383abef" class="m-dox">tk::<wbr />AllCommMaps</a>&amp; bnd)</span>
            </dt>
            <dd>Incoming query for a list mesh nodes for which this chare compiles communication maps.</dd>
            <dt>
              <span class="m-dox-wrap-bumper">void <a href="#a6bb38169310e16da22128fdcf2fa8257" class="m-dox-self" name="a6bb38169310e16da22128fdcf2fa8257">recvquery</a>(</span><span class="m-dox-wrap">)</span>
            </dt>
            <dd>Report receipt of boundary node lists.</dd>
            <dt>
              <span class="m-dox-wrap-bumper">void <a href="#ad2c8ec61ce1a18c004bf63140261daae" class="m-dox-self" name="ad2c8ec61ce1a18c004bf63140261daae">response</a>(</span><span class="m-dox-wrap">)</span>
            </dt>
            <dd>Respond to boundary node list queries.</dd>
            <dt>
              <span class="m-dox-wrap-bumper">void <a href="#a8f03b78bd9ace7c923caf778b611eddf" class="m-dox">bnd</a>(</span><span class="m-dox-wrap">int fromch,
              const <a href="namespacetk.html#aa1968d843c749b8901c9ffd71b3afb54" class="m-dox">tk::<wbr />CommMaps</a>&amp; msum)</span>
            </dt>
            <dd>Receive boundary node communication maps for our mesh chunk.</dd>
            <dt>
              <span class="m-dox-wrap-bumper">void <a href="#ac48dc779e3e4eef4af0a7c4afe357351" class="m-dox-self" name="ac48dc779e3e4eef4af0a7c4afe357351">recvbnd</a>(</span><span class="m-dox-wrap">)</span>
            </dt>
            <dd>Receive receipt of boundary node communication map.</dd>
            <dt>
              <span class="m-dox-wrap-bumper">void <a href="#a40f2a51e600250cf48857b6d815ab13b" class="m-dox-self" name="a40f2a51e600250cf48857b6d815ab13b">start</a>(</span><span class="m-dox-wrap">)</span>
            </dt>
            <dd>Start reordering (if user enabled it)</dd>
            <dt>
              <span class="m-dox-wrap-bumper">void <a href="#a46342a666a96e5492888039cc42dd8ee" class="m-dox">offset</a>(</span><span class="m-dox-wrap">int c,
              std::size_t u)</span>
            </dt>
            <dd>Receive number of uniquely assigned global mesh node IDs from chares with lower indices.</dd>
            <dt>
              <span class="m-dox-wrap-bumper">void <a href="#af58c9d0423081eddfb70f8f382462217" class="m-dox">request</a>(</span><span class="m-dox-wrap">int c,
              const std::unordered_set&lt;std::size_t&gt;&amp; nd)</span>
            </dt>
            <dd>Request new global node IDs for old node IDs.</dd>
            <dt>
              <span class="m-dox-wrap-bumper">void <a href="#ab88dfc80a077ef8690f6b89b3c09e6c4" class="m-dox-self" name="ab88dfc80a077ef8690f6b89b3c09e6c4">lower</a>(</span><span class="m-dox-wrap">std::size_t low)</span>
            </dt>
            <dd>Receive lower bound of node IDs our PE operates on after reordering.</dd>
            <dt>
              <span class="m-dox-wrap-bumper">void <a href="#a3d643a1a64ca369030170c76a80b3257" class="m-dox">neworder</a>(</span><span class="m-dox-wrap">const std::unordered_map&lt;std::size_t, std::tuple&lt;std::size_t, <a href="classtk_1_1_uns_mesh.html#a880f09d552514074c37973e005b1f63e" class="m-dox">tk::<wbr />UnsMesh::<wbr />Coord</a>&gt;&gt;&amp; nodes)</span>
            </dt>
            <dd>Receive new (reordered) global node IDs and coordinates.</dd>
            <dt>
              <span class="m-dox-wrap-bumper">void <a href="#afdf45d3adb35902c5120c1ab5c849779" class="m-dox-self" name="afdf45d3adb35902c5120c1ab5c849779">createWorkers</a>(</span><span class="m-dox-wrap">)</span>
            </dt>
            <dd>Create worker chare array elements on this PE.</dd>
            <dt>
              <span class="m-dox-wrap-bumper">void <a href="#a80495739b3f48ea0951ce457cdef556b" class="m-dox">mesh</a>(</span><span class="m-dox-wrap">std::vector&lt;std::size_t&gt;&amp; ginpoel,
              <a href="classtk_1_1_uns_mesh.html#a4b2d1f8043c0354b11461c118a4379c5" class="m-dox">tk::<wbr />UnsMesh::<wbr />CoordMap</a>&amp; coordmap,
              std::vector&lt;std::size_t&gt;&amp; triinpoel,
              std::map&lt;int, std::vector&lt;std::size_t&gt;&gt;&amp; bnode)</span>
            </dt>
            <dd>Update mesh data we hold for whoever calls this function.</dd>
          </dl>
        </section>
        <section id="charm-packunpack-serializer-member-functions">
          <h2><a href="#charm-packunpack-serializer-member-functions">Charm++ pack/unpack serializer member functions</a></h2>
          <dl class="m-dox">
            <dt>std::size_t <a href="#a9ea374c636df80933fd8de86b921a003" class="m-dox-self" name="a9ea374c636df80933fd8de86b921a003">m_meshid</a></dt>
            <dd>Mesh ID.</dd>
            <dt>CProxy_Transporter <a href="#a72ea4d1a6289dbad2406270375e4591d" class="m-dox-self" name="a72ea4d1a6289dbad2406270375e4591d">m_host</a></dt>
            <dd>Host proxy.</dd>
            <dt>tk::CProxy_MeshWriter <a href="#a15260da4179cbeaa1e4666ee6bee96ad" class="m-dox-self" name="a15260da4179cbeaa1e4666ee6bee96ad">m_meshwriter</a></dt>
            <dd>MeshWriter proxy.</dd>
            <dt><a href="namespacetk.html#a42b962beda9ad3f300a4fc5a06709449" class="m-dox">tk::<wbr />SorterCallback</a> <a href="#a5c9b323cc984267a513608c81e30ed3a" class="m-dox-self" name="a5c9b323cc984267a513608c81e30ed3a">m_cbs</a></dt>
            <dd>Charm++ callbacks associated to compile-time tags for sorter.</dd>
            <dt>std::vector&lt;<a href="classinciter_1_1_scheme.html" class="m-dox">Scheme</a>&gt; <a href="#aaa9ee17dbf3f0ab20400a9cbfca54b01" class="m-dox-self" name="aaa9ee17dbf3f0ab20400a9cbfca54b01">m_scheme</a></dt>
            <dd><a href="classinciter_1_1_discretization.html" class="m-dox">Discretization</a> schemes (one per mesh)</dd>
            <dt>CkCallback <a href="#a37833590a0833e81de575ac46ca2e801" class="m-dox-self" name="a37833590a0833e81de575ac46ca2e801">m_reorderRefiner</a></dt>
            <dd>Callback to use to send reordered mesh to <a href="classinciter_1_1_refiner.html" class="m-dox">Refiner</a>.</dd>
            <dt>std::vector&lt;std::size_t&gt; <a href="#a9c4c5037d8dca525a56c03b316d6f1d9" class="m-dox-self" name="a9c4c5037d8dca525a56c03b316d6f1d9">m_ginpoel</a></dt>
            <dd>Tetrtahedron element connectivity of our chunk of the mesh (global ids)</dd>
            <dt><a href="classtk_1_1_uns_mesh.html#a4b2d1f8043c0354b11461c118a4379c5" class="m-dox">tk::<wbr />UnsMesh::<wbr />CoordMap</a> <a href="#a6e22a30aa6f7279990ec4ea93ceb6127" class="m-dox-self" name="a6e22a30aa6f7279990ec4ea93ceb6127">m_coordmap</a></dt>
            <dd>Coordinates associated to global node IDs of our mesh chunk.</dd>
            <dt><a href="classtk_1_1_uns_mesh.html#a87277adba5b6fc23035adcd8dd6cb0e5" class="m-dox">tk::<wbr />UnsMesh::<wbr />Chunk</a> <a href="#a4187bc17ae2fa55f9180306729397c23" class="m-dox-self" name="a4187bc17ae2fa55f9180306729397c23">m_el</a></dt>
            <dd>Elements of the mesh chunk we operate on.</dd>
            <dt>std::size_t <a href="#a2258d840d3490160bdd4ba3bdcb4ae28" class="m-dox-self" name="a2258d840d3490160bdd4ba3bdcb4ae28">m_nbnd</a></dt>
            <dd>Counter for number of chares contributing to chare boundary nodes.</dd>
            <dt>std::map&lt;int, std::vector&lt;std::size_t&gt;&gt; <a href="#aa306c3cd8d2cd8a6bf2be6da3a126ece" class="m-dox-self" name="aa306c3cd8d2cd8a6bf2be6da3a126ece">m_bface</a></dt>
            <dd>List of boundary faces associated to side-set IDs.</dd>
            <dt>std::vector&lt;std::size_t&gt; <a href="#a3e12cf381612434802575c9f6c04ec9d" class="m-dox-self" name="a3e12cf381612434802575c9f6c04ec9d">m_triinpoel</a></dt>
            <dd>Boundary face-node connectivity.</dd>
            <dt>std::map&lt;int, std::vector&lt;std::size_t&gt;&gt; <a href="#acf9ce6b022dbf99c7e1f4b33894d2944" class="m-dox-self" name="acf9ce6b022dbf99c7e1f4b33894d2944">m_bnode</a></dt>
            <dd>List of boundary nodes associated to side-set IDs.</dd>
            <dt>std::unordered_map&lt;std::size_t, std::set&lt;std::size_t&gt;&gt; <a href="#afbdaaca4b2e3643b9920fbcd1c0904b4" class="m-dox-self" name="afbdaaca4b2e3643b9920fbcd1c0904b4">m_elemblockid</a></dt>
            <dd>Local tet ids associated with mesh block ids.</dd>
            <dt>int <a href="#af5561f7c2e28e3d78c0d9e0333cc715c" class="m-dox-self" name="af5561f7c2e28e3d78c0d9e0333cc715c">m_nchare</a></dt>
            <dd>Total number of sorter chares.</dd>
            <dt>std::set&lt;std::size_t&gt; <a href="#a39f916c2338d5fda993e24a781281841" class="m-dox-self" name="a39f916c2338d5fda993e24a781281841">m_nodeset</a></dt>
            <dd>Unique global node IDs chares on our PE will contribute to.</dd>
            <dt>int <a href="#a836efa1dffde0dc807b90e9c22002a42" class="m-dox-self" name="a836efa1dffde0dc807b90e9c22002a42">m_noffset</a></dt>
            <dd>Counter for the number of chares from which this chare has received node reordering offsets from.</dd>
            <dt>std::unordered_map&lt;std::size_t, std::vector&lt;int&gt;&gt; <a href="#aa863ac3f34d2f8fc3b4e7227f45a256a" class="m-dox-self" name="aa863ac3f34d2f8fc3b4e7227f45a256a">m_nodech</a></dt>
            <dd>Node-&gt;chare map used to build boundary node communication maps.</dd>
            <dt><a href="namespacetk.html#afae1f1be5bf7e58189087d896b6d6ad4" class="m-dox">tk::<wbr />NodeCommMap</a> <a href="#a7ee5b61dccb67e780a8827c57dd98630" class="m-dox-self" name="a7ee5b61dccb67e780a8827c57dd98630">m_chnode</a></dt>
            <dd>Chare-&gt;node map used to build boundary node communication maps.</dd>
            <dt>std::unordered_map&lt;<a href="classtk_1_1_uns_mesh.html#a622c34bab099c772650f046b848346d7" class="m-dox">tk::<wbr />UnsMesh::<wbr />Edge</a>, std::vector&lt;int&gt;, <a href="structtk_1_1_uns_mesh_1_1_hash.html" class="m-dox">tk::<wbr />UnsMesh::<wbr />Hash</a>&lt;2&gt;, <a href="structtk_1_1_uns_mesh_1_1_eq.html" class="m-dox">tk::<wbr />UnsMesh::<wbr />Eq</a>&lt;2&gt;&gt; <a href="#ae38c4373dff4185fd449690826ebc1f0" class="m-dox-self" name="ae38c4373dff4185fd449690826ebc1f0">m_edgech</a></dt>
            <dd>Edge-&gt;chare map used to build boundary edge communication maps.</dd>
            <dt><a href="namespacetk.html#a0b9698b4e675bcacfb5726151c08ea8e" class="m-dox">tk::<wbr />EdgeCommMap</a> <a href="#a09cff84f5af9a9273282fba093c3361d" class="m-dox-self" name="a09cff84f5af9a9273282fba093c3361d">m_chedge</a></dt>
            <dd>Chare-&gt;edge map used to build boundary edge communication maps.</dd>
            <dt><a href="namespacetk.html#aa1968d843c749b8901c9ffd71b3afb54" class="m-dox">tk::<wbr />CommMaps</a> <a href="#aedca7109debb8d030fbd46d38090c268" class="m-dox-self" name="aedca7109debb8d030fbd46d38090c268">m_msum</a></dt>
            <dd>Communication maps associated to chare IDs.</dd>
            <dt>std::unordered_map&lt;int, std::unordered_set&lt;std::size_t&gt;&gt; <a href="#a00ab9ae610e72bbe98f08ee5a0fc81b5" class="m-dox">m_reordcomm</a></dt>
            <dd>Communication map used for distributed mesh node reordering.</dd>
            <dt>std::size_t <a href="#ad3eab8acb64865dac049686919582a9a" class="m-dox-self" name="ad3eab8acb64865dac049686919582a9a">m_start</a></dt>
            <dd>Starting global mesh node ID for node reordering on this chare during mesh node reordering.</dd>
            <dt>std::unordered_map&lt;std::size_t, std::size_t&gt; <a href="#a80fdbf65ae425a23e10ca718a296bfc3" class="m-dox-self" name="a80fdbf65ae425a23e10ca718a296bfc3">m_newnodes</a></dt>
            <dd>Map associating new node IDs (value) to old node IDs (key)</dd>
            <dt><a href="classtk_1_1_uns_mesh.html#a4b2d1f8043c0354b11461c118a4379c5" class="m-dox">tk::<wbr />UnsMesh::<wbr />CoordMap</a> <a href="#a4c72377c4f7e1c6737546d03d767aafc" class="m-dox-self" name="a4c72377c4f7e1c6737546d03d767aafc">m_newcoordmap</a></dt>
            <dd>Coordinates associated to global (new) node IDs during reordering.</dd>
            <dt>std::vector&lt;std::pair&lt;int, std::unordered_set&lt;std::size_t&gt;&gt;&gt; <a href="#a15091e00fac037fc4d650f1061359ae4" class="m-dox-self" name="a15091e00fac037fc4d650f1061359ae4">m_reqnodes</a></dt>
            <dd>Queue of requested node IDs from chares.</dd>
            <dt>std::size_t <a href="#adf82de5d37de81c8fdf60a91456eb8d1" class="m-dox-self" name="adf82de5d37de81c8fdf60a91456eb8d1">m_lower</a></dt>
            <dd>Lower bound of node IDs this chare contributes to in a linear system.</dd>
            <dt>std::size_t <a href="#ac0935c8b79aa30fd919b4850cc5799f8" class="m-dox-self" name="ac0935c8b79aa30fd919b4850cc5799f8">m_upper</a></dt>
            <dd>Upper bound of node IDs this chare contributes to in a linear system.</dd>
            <dt>
              <span class="m-dox-wrap-bumper">void <a href="#a2b696e3f93c21786a5e30fb7f6593b88" class="m-dox">pup</a>(</span><span class="m-dox-wrap">PUP::er&amp; p) override</span>
            </dt>
            <dd>Pack/Unpack serialize member function.</dd>
            <dt>
              <span class="m-dox-wrap-bumper">void <a href="#a05c2e33164f7523b98202c3e766f4449" class="m-dox">operator|</a>(</span><span class="m-dox-wrap">PUP::er&amp; p,
              <a href="classinciter_1_1_sorter.html" class="m-dox">Sorter</a>&amp; s)</span>
            </dt>
            <dd>Pack/Unpack serialize operator|.</dd>
          </dl>
        </section>
        <section>
          <h2>Function documentation</h2>
          <section class="m-dox-details" id="a9c5c0dfc32bcd49db7bf4a708a613502"><div>
            <h3>
              <span class="m-dox-wrap-bumper"> inciter::<wbr />Sorter::<wbr /></span><span class="m-dox-wrap"><span class="m-dox-wrap-bumper"><a href="#a9c5c0dfc32bcd49db7bf4a708a613502" class="m-dox-self">Sorter</a>(</span><span class="m-dox-wrap">std::size_t meshid,
              const CProxy_Transporter&amp; transporter,
              const tk::CProxy_MeshWriter&amp; meshwriter,
              const <a href="namespacetk.html#a42b962beda9ad3f300a4fc5a06709449" class="m-dox">tk::<wbr />SorterCallback</a>&amp; cbs,
              const std::vector&lt;<a href="classinciter_1_1_scheme.html" class="m-dox">Scheme</a>&gt;&amp; scheme,
              CkCallback reorderRefiner,
              const std::vector&lt;std::size_t&gt;&amp; ginpoel,
              const <a href="classtk_1_1_uns_mesh.html#a4b2d1f8043c0354b11461c118a4379c5" class="m-dox">tk::<wbr />UnsMesh::<wbr />CoordMap</a>&amp; coordmap,
              const <a href="classtk_1_1_uns_mesh.html#a87277adba5b6fc23035adcd8dd6cb0e5" class="m-dox">tk::<wbr />UnsMesh::<wbr />Chunk</a>&amp; el,
              const std::map&lt;int, std::vector&lt;std::size_t&gt;&gt;&amp; bface,
              const std::vector&lt;std::size_t&gt;&amp; triinpoel,
              const std::map&lt;int, std::vector&lt;std::size_t&gt;&gt;&amp; bnode,
              const std::unordered_map&lt;std::size_t, std::set&lt;std::size_t&gt;&gt;&amp; elemblockid,
              int nchare) <span class="m-label m-info">explicit</span> </span></span>
            </h3>
            <p>Constructor.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">meshid&nbsp;<span class="m-label m-flat m-info">in</span></td>
                  <td>Mesh ID</td>
                </tr>
                <tr>
                  <td>transporter&nbsp;<span class="m-label m-flat m-info">in</span></td>
                  <td><a href="classinciter_1_1_transporter.html" class="m-dox">Transporter</a> (host) Charm++ proxy</td>
                </tr>
                <tr>
                  <td>meshwriter&nbsp;<span class="m-label m-flat m-info">in</span></td>
                  <td>Mesh writer Charm++ proxy</td>
                </tr>
                <tr>
                  <td>cbs&nbsp;<span class="m-label m-flat m-info">in</span></td>
                  <td>Charm++ callbacks for <a href="classinciter_1_1_sorter.html" class="m-dox">Sorter</a></td>
                </tr>
                <tr>
                  <td>scheme&nbsp;<span class="m-label m-flat m-info">in</span></td>
                  <td><a href="classinciter_1_1_discretization.html" class="m-dox">Discretization</a> schemes (one per mesh)</td>
                </tr>
                <tr>
                  <td>reorderRefiner&nbsp;<span class="m-label m-flat m-info">in</span></td>
                  <td>Callback to use to send reordered mesh to <a href="classinciter_1_1_refiner.html" class="m-dox">Refiner</a></td>
                </tr>
                <tr>
                  <td>ginpoel&nbsp;<span class="m-label m-flat m-info">in</span></td>
                  <td>Mesh connectivity (this chare) using global node IDs</td>
                </tr>
                <tr>
                  <td>coordmap&nbsp;<span class="m-label m-flat m-info">in</span></td>
                  <td>Mesh node coordinates (this chare) for global node IDs</td>
                </tr>
                <tr>
                  <td>el</td>
                  <td></td>
                </tr>
                <tr>
                  <td>bface&nbsp;<span class="m-label m-flat m-info">in</span></td>
                  <td>Face lists mapped to side set ids</td>
                </tr>
                <tr>
                  <td>triinpoel&nbsp;<span class="m-label m-flat m-info">in</span></td>
                  <td>Interconnectivity of points and boundary-faces</td>
                </tr>
                <tr>
                  <td>bnode&nbsp;<span class="m-label m-flat m-info">in</span></td>
                  <td>Node ids mapped to side set ids</td>
                </tr>
                <tr>
                  <td>elemblockid&nbsp;<span class="m-label m-flat m-info">in</span></td>
                  <td>Local tet ids associated to mesh block ids</td>
                </tr>
                <tr>
                  <td>nchare&nbsp;<span class="m-label m-flat m-info">in</span></td>
                  <td>Total number of Charm++ worker chares</td>
                </tr>
              </tbody>
            </table>
          </div></section>
          <section class="m-dox-details" id="a55d67ca219f06c2ebdd9e631fe5e298a"><div>
            <h3>
              <span class="m-dox-wrap-bumper">void inciter::<wbr />Sorter::<wbr /></span><span class="m-dox-wrap"><span class="m-dox-wrap-bumper"><a href="#a55d67ca219f06c2ebdd9e631fe5e298a" class="m-dox-self">setup</a>(</span><span class="m-dox-wrap">std::size_t npoin)</span></span>
            </h3>
            <p>Setup chare mesh boundary node communication map.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">npoin&nbsp;<span class="m-label m-flat m-info">in</span></td>
                  <td>Total number of mesh points in mesh. Note that the number of mesh points does not have to be exactly the total number of points in the mesh. It can be a larger number, but not less. This is only used here to assign nodes to workers that will assign ids to mesh nodes during node reordering.</td>
                </tr>
              </tbody>
            </table>
          </div></section>
          <section class="m-dox-details" id="a183ef036d19c3c6ab4450bc56748b196"><div>
            <h3>
              <span class="m-dox-wrap-bumper">void inciter::<wbr />Sorter::<wbr /></span><span class="m-dox-wrap"><span class="m-dox-wrap-bumper"><a href="#a183ef036d19c3c6ab4450bc56748b196" class="m-dox-self">query</a>(</span><span class="m-dox-wrap">int fromch,
              const <a href="namespacetk.html#a75788bc5ea5dc638a5981d8b8383abef" class="m-dox">tk::<wbr />AllCommMaps</a>&amp; bnd)</span></span>
            </h3>
            <p>Incoming query for a list mesh nodes for which this chare compiles communication maps.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">fromch&nbsp;<span class="m-label m-flat m-info">in</span></td>
                  <td>Sender chare ID</td>
                </tr>
                <tr>
                  <td>bnd&nbsp;<span class="m-label m-flat m-info">in</span></td>
                  <td>Chare-boundary data from another chare</td>
                </tr>
              </tbody>
            </table>
          </div></section>
          <section class="m-dox-details" id="a8f03b78bd9ace7c923caf778b611eddf"><div>
            <h3>
              <span class="m-dox-wrap-bumper">void inciter::<wbr />Sorter::<wbr /></span><span class="m-dox-wrap"><span class="m-dox-wrap-bumper"><a href="#a8f03b78bd9ace7c923caf778b611eddf" class="m-dox-self">bnd</a>(</span><span class="m-dox-wrap">int fromch,
              const <a href="namespacetk.html#aa1968d843c749b8901c9ffd71b3afb54" class="m-dox">tk::<wbr />CommMaps</a>&amp; msum)</span></span>
            </h3>
            <p>Receive boundary node communication maps for our mesh chunk.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">fromch&nbsp;<span class="m-label m-flat m-info">in</span></td>
                  <td>Sender chare ID</td>
                </tr>
                <tr>
                  <td>msum&nbsp;<span class="m-label m-flat m-info">in</span></td>
                  <td>Communication map(s) assembled by chare fromch</td>
                </tr>
              </tbody>
            </table>
          </div></section>
          <section class="m-dox-details" id="a46342a666a96e5492888039cc42dd8ee"><div>
            <h3>
              <span class="m-dox-wrap-bumper">void inciter::<wbr />Sorter::<wbr /></span><span class="m-dox-wrap"><span class="m-dox-wrap-bumper"><a href="#a46342a666a96e5492888039cc42dd8ee" class="m-dox-self">offset</a>(</span><span class="m-dox-wrap">int c,
              std::size_t u)</span></span>
            </h3>
            <p>Receive number of uniquely assigned global mesh node IDs from chares with lower indices.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">c&nbsp;<span class="m-label m-flat m-info">in</span></td>
                  <td>Chare ID</td>
                </tr>
                <tr>
                  <td>u&nbsp;<span class="m-label m-flat m-info">in</span></td>
                  <td>Number of mesh node IDs chare c will assign IDs to</td>
                </tr>
              </tbody>
            </table>
<p>This function computes the offset each chare will need to start assigning its new node IDs from. The offset for a chare is the offset for the previous chare plus the number of node IDs the previous chare (uniquely) assigns new IDs for minus the number of node IDs the previous chare receives from others (lower chares). This is computed here in a parallel/distributed fashion by each chare sending its number of node IDs (that it uniquely assigns) to all chares. Note that each chare would only need to send this information to chares with higher IDs, but instead this function is called in a broadcast fashion, because that is more efficient than individual calls to only chares with higher IDs. Therefore when computing the offsets, we only count the lower chares. When this is done, we have the precise asymmetric communication map as well as the start offset on all chares and so we can start the distributed global mesh node ID reordering.</p>
          </div></section>
          <section class="m-dox-details" id="af58c9d0423081eddfb70f8f382462217"><div>
            <h3>
              <span class="m-dox-wrap-bumper">void inciter::<wbr />Sorter::<wbr /></span><span class="m-dox-wrap"><span class="m-dox-wrap-bumper"><a href="#af58c9d0423081eddfb70f8f382462217" class="m-dox-self">request</a>(</span><span class="m-dox-wrap">int c,
              const std::unordered_set&lt;std::size_t&gt;&amp; nd)</span></span>
            </h3>
            <p>Request new global node IDs for old node IDs.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">c&nbsp;<span class="m-label m-flat m-info">in</span></td>
                  <td>Chare request coming from and to which we send new IDs to</td>
                </tr>
                <tr>
                  <td>nd&nbsp;<span class="m-label m-flat m-info">in</span></td>
                  <td>Set of old node IDs whose new IDs are requested</td>
                </tr>
              </tbody>
            </table>
          </div></section>
          <section class="m-dox-details" id="a3d643a1a64ca369030170c76a80b3257"><div>
            <h3>
              <span class="m-dox-wrap-bumper">void inciter::<wbr />Sorter::<wbr /></span><span class="m-dox-wrap"><span class="m-dox-wrap-bumper"><a href="#a3d643a1a64ca369030170c76a80b3257" class="m-dox-self">neworder</a>(</span><span class="m-dox-wrap">const std::unordered_map&lt;std::size_t, std::tuple&lt;std::size_t, <a href="classtk_1_1_uns_mesh.html#a880f09d552514074c37973e005b1f63e" class="m-dox">tk::<wbr />UnsMesh::<wbr />Coord</a>&gt;&gt;&amp; nodes)</span></span>
            </h3>
            <p>Receive new (reordered) global node IDs and coordinates.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">nodes&nbsp;<span class="m-label m-flat m-info">in</span></td>
                  <td>Map associating new to old node IDs</td>
                </tr>
              </tbody>
            </table>
          </div></section>
          <section class="m-dox-details" id="a80495739b3f48ea0951ce457cdef556b"><div>
            <h3>
              <span class="m-dox-wrap-bumper">void inciter::<wbr />Sorter::<wbr /></span><span class="m-dox-wrap"><span class="m-dox-wrap-bumper"><a href="#a80495739b3f48ea0951ce457cdef556b" class="m-dox-self">mesh</a>(</span><span class="m-dox-wrap">std::vector&lt;std::size_t&gt;&amp; ginpoel,
              <a href="classtk_1_1_uns_mesh.html#a4b2d1f8043c0354b11461c118a4379c5" class="m-dox">tk::<wbr />UnsMesh::<wbr />CoordMap</a>&amp; coordmap,
              std::vector&lt;std::size_t&gt;&amp; triinpoel,
              std::map&lt;int, std::vector&lt;std::size_t&gt;&gt;&amp; bnode)</span></span>
            </h3>
            <p>Update mesh data we hold for whoever calls this function.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">ginpoel&nbsp;<span class="m-label m-flat m-danger">in/out</span></td>
                  <td>Mesh connectivity using global IDs</td>
                </tr>
                <tr>
                  <td>coordmap&nbsp;<span class="m-label m-flat m-danger">in/out</span></td>
                  <td>Map of mesh node coordinates</td>
                </tr>
                <tr>
                  <td>triinpoel&nbsp;<span class="m-label m-flat m-danger">in/out</span></td>
                  <td>Boundary face-node connectivity</td>
                </tr>
                <tr>
                  <td>bnode&nbsp;<span class="m-label m-flat m-info">in</span></td>
                  <td>Node lists of side sets</td>
                </tr>
              </tbody>
            </table>
          </div></section>
          <section class="m-dox-details" id="a2b696e3f93c21786a5e30fb7f6593b88"><div>
            <h3>
              <span class="m-dox-wrap-bumper">void inciter::<wbr />Sorter::<wbr /></span><span class="m-dox-wrap"><span class="m-dox-wrap-bumper"><a href="#a2b696e3f93c21786a5e30fb7f6593b88" class="m-dox-self">pup</a>(</span><span class="m-dox-wrap">PUP::er&amp; p) override</span></span>
            </h3>
            <p>Pack/Unpack serialize member function.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">p&nbsp;<span class="m-label m-flat m-danger">in/out</span></td>
                  <td>Charm++&#x27;s PUP::er serializer object reference</td>
                </tr>
              </tbody>
            </table>
          </div></section>
          <section class="m-dox-details" id="a05c2e33164f7523b98202c3e766f4449"><div>
            <h3>
              <span class="m-dox-wrap-bumper">void inciter::<wbr />Sorter::<wbr /></span><span class="m-dox-wrap"><span class="m-dox-wrap-bumper"><a href="#a05c2e33164f7523b98202c3e766f4449" class="m-dox-self">operator|</a>(</span><span class="m-dox-wrap">PUP::er&amp; p,
              <a href="classinciter_1_1_sorter.html" class="m-dox">Sorter</a>&amp; s)</span></span>
            </h3>
            <p>Pack/Unpack serialize operator|.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">p&nbsp;<span class="m-label m-flat m-danger">in/out</span></td>
                  <td>Charm++&#x27;s PUP::er serializer object reference</td>
                </tr>
                <tr>
                  <td>s&nbsp;<span class="m-label m-flat m-danger">in/out</span></td>
                  <td><a href="classinciter_1_1_sorter.html" class="m-dox">Sorter</a> object reference</td>
                </tr>
              </tbody>
            </table>
          </div></section>
        </section>
        <section>
          <h2>Variable documentation</h2>
          <section class="m-dox-details" id="a00ab9ae610e72bbe98f08ee5a0fc81b5"><div>
            <h3>
              std::unordered_map&lt;int, std::unordered_set&lt;std::size_t&gt;&gt; inciter::<wbr />Sorter::<wbr /><a href="#a00ab9ae610e72bbe98f08ee5a0fc81b5" class="m-dox-self">m_reordcomm</a>
            </h3>
            <p>Communication map used for distributed mesh node reordering.</p>
<p>This map associates the list of global mesh point indices to fellow chare IDs from which this chare receives new node IDs during reordering. Only data that will be received from chares with a lower index are stored, thus this is an asymmetric communication map.</p>
          </div></section>
        </section>
      </div>
    </div>
  </div>
</article></main>
<div class="m-dox-search" id="search">
  <a href="#!" onclick="return hideSearch()"></a>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-m-8 m-push-m-2">
        <div class="m-dox-search-header m-text m-small">
          <div><span class="m-label m-default">Tab</span> / <span class="m-label m-default">T</span> to search, <span class="m-label m-default">Esc</span> to close</div>
          <div id="search-symbolcount">&hellip;</div>
        </div>
        <div class="m-dox-search-content">
          <input type="search" id="search-input" placeholder="Loading &hellip;" disabled="disabled" autofocus="autofocus" />
          <noscript class="m-text m-danger m-text-center">Unlike everything else in the docs, the search functionality <em>requires</em> JavaScript. Enable it or <a href="https://google.com/search?q=site:quinoacomputing.github.io+">use an external search engine</a>.</noscript>
          <div id="search-help" class="m-text m-dim m-text-center">
            Search for symbols, directories, files, pages or modules. You can omit any
            prefix from the symbol or file path; adding a <code>:</code> or <code>/</code>
            suffix lists all members of given symbol or directory. Navigate through the
            list using <span class="m-label m-dim">&darr;</span> and
            <span class="m-label m-dim">&uarr;</span>, press
            <span class="m-label m-dim">Enter</span> to go.
          </div>
          <div id="search-notfound" class="m-text m-warning m-text-center">Sorry, nothing was found.<br />Maybe try a full-text <a href="#" id="search-external" data-search-engine="https://google.com/search?q=site:quinoacomputing.github.io+{query}">search with external engine</a>?</div>
          <ul id="search-results"></ul>
        </div>
      </div>
    </div>
  </div>
</div>
<script src="search.js"></script>
<script src="searchdata.js" async="async"></script>
<footer><nav>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <p>Quinoa docs, part of the <a href="http://quinoacomputing.github.io/">Quinoa project</a>. Copyright © J. Bakosi 2012&ndash;2015, Los Alamos National Security, LLC, 2016&ndash;2018, <a href="https://www.triadns.org/">Triad National Security, LLC,</a> 2019-2021. Generated on Tuesday, Feb 21, 2023 based on <a href="https://github.com/quinoacomputing/quinoa/commit/-128-NOTFOUND">-128-NOTFOUND</a> by <a href="http://doxygen.org/">Doxygen</a> and <a href="http://mcss.mosra.cz/">m.css</a>. Contact us via <a href="https://github.com/quinoacomputing/quinoa/issues">GitHub</a>.</p>
      </div>
    </div>
  </div>
</nav></footer>
</body>
</html>