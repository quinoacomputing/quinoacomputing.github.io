
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Cppcheck - HTML report - [<a href=https://github.com/quinoacomputing/quinoa/commit/-128-NOTFOUND>-128-NOTFOUND</a>]</title>
    <link rel="stylesheet" href="style.css">
    <style>
pre { line-height: 125%; margin: 0; }
td.linenos pre { color: #000000; background-color: #f0f0f0; padding: 0 5px 0 5px; }
span.linenos { color: #000000; background-color: #f0f0f0; padding: 0 5px 0 5px; }
td.linenos pre.special { color: #000000; background-color: #ffffc0; padding: 0 5px 0 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding: 0 5px 0 5px; }
.highlight .hll { background-color: #ffffcc }
.highlight { background: #ffffff; }
.highlight .c { color: #888888 } /* Comment */
.highlight .err { color: #FF0000; background-color: #FFAAAA } /* Error */
.highlight .k { color: #008800; font-weight: bold } /* Keyword */
.highlight .o { color: #333333 } /* Operator */
.highlight .ch { color: #888888 } /* Comment.Hashbang */
.highlight .cm { color: #888888 } /* Comment.Multiline */
.highlight .cp { color: #557799 } /* Comment.Preproc */
.highlight .cpf { color: #888888 } /* Comment.PreprocFile */
.highlight .c1 { color: #888888 } /* Comment.Single */
.highlight .cs { color: #cc0000; font-weight: bold } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .gr { color: #FF0000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #00A000 } /* Generic.Inserted */
.highlight .go { color: #888888 } /* Generic.Output */
.highlight .gp { color: #c65d09; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008800; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008800; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008800; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #003388; font-weight: bold } /* Keyword.Pseudo */
.highlight .kr { color: #008800; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #333399; font-weight: bold } /* Keyword.Type */
.highlight .m { color: #6600EE; font-weight: bold } /* Literal.Number */
.highlight .s { background-color: #fff0f0 } /* Literal.String */
.highlight .na { color: #0000CC } /* Name.Attribute */
.highlight .nb { color: #007020 } /* Name.Builtin */
.highlight .nc { color: #BB0066; font-weight: bold } /* Name.Class */
.highlight .no { color: #003366; font-weight: bold } /* Name.Constant */
.highlight .nd { color: #555555; font-weight: bold } /* Name.Decorator */
.highlight .ni { color: #880000; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #FF0000; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0066BB; font-weight: bold } /* Name.Function */
.highlight .nl { color: #997700; font-weight: bold } /* Name.Label */
.highlight .nn { color: #0e84b5; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #007700 } /* Name.Tag */
.highlight .nv { color: #996633 } /* Name.Variable */
.highlight .ow { color: #000000; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #6600EE; font-weight: bold } /* Literal.Number.Bin */
.highlight .mf { color: #6600EE; font-weight: bold } /* Literal.Number.Float */
.highlight .mh { color: #005588; font-weight: bold } /* Literal.Number.Hex */
.highlight .mi { color: #0000DD; font-weight: bold } /* Literal.Number.Integer */
.highlight .mo { color: #4400EE; font-weight: bold } /* Literal.Number.Oct */
.highlight .sa { background-color: #fff0f0 } /* Literal.String.Affix */
.highlight .sb { background-color: #fff0f0 } /* Literal.String.Backtick */
.highlight .sc { color: #0044DD } /* Literal.String.Char */
.highlight .dl { background-color: #fff0f0 } /* Literal.String.Delimiter */
.highlight .sd { color: #DD4422 } /* Literal.String.Doc */
.highlight .s2 { background-color: #fff0f0 } /* Literal.String.Double */
.highlight .se { color: #666666; font-weight: bold; background-color: #fff0f0 } /* Literal.String.Escape */
.highlight .sh { background-color: #fff0f0 } /* Literal.String.Heredoc */
.highlight .si { background-color: #eeeeee } /* Literal.String.Interpol */
.highlight .sx { color: #DD2200; background-color: #fff0f0 } /* Literal.String.Other */
.highlight .sr { color: #000000; background-color: #fff0ff } /* Literal.String.Regex */
.highlight .s1 { background-color: #fff0f0 } /* Literal.String.Single */
.highlight .ss { color: #AA6600 } /* Literal.String.Symbol */
.highlight .bp { color: #007020 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0066BB; font-weight: bold } /* Name.Function.Magic */
.highlight .vc { color: #336699 } /* Name.Variable.Class */
.highlight .vg { color: #dd7700; font-weight: bold } /* Name.Variable.Global */
.highlight .vi { color: #3333BB } /* Name.Variable.Instance */
.highlight .vm { color: #996633 } /* Name.Variable.Magic */
.highlight .il { color: #0000DD; font-weight: bold } /* Literal.Number.Integer.Long */
    </style>
    <script>
      function getStyle(el, styleProp) {
        var y;

        if (el.currentStyle) {
          y = el.currentStyle[styleProp];
        } else if (window.getComputedStyle) {
          y = document.defaultView.getComputedStyle(el, null).getPropertyValue(styleProp);
        }

        return y;
      }

      function toggle() {
        var el = this.expandable_content;
        var mark = this.expandable_marker;

        if (el.style.display === "block") {
          el.style.display = "none";
          mark.textContent = "[+]";
        } else {
          el.style.display = "block";
          mark.textContent = "[-]";
        }
      }

      function initExpandables() {
        var elements = document.querySelectorAll(".expandable");

        for (var i = 0, len = elements.length; i < len; i++) {
          var el = elements[i];
          var clickable = el.querySelector("span");
          var marker = clickable.querySelector(".marker");
          var content = el.querySelector(".content");
          var width = clickable.clientWidth - parseInt(getStyle(content, "padding-left")) - parseInt(getStyle(content, "padding-right"));
          content.style.width = width + "px";
          clickable.expandable_content = content;
          clickable.expandable_marker = marker;
          clickable.addEventListener("click", toggle);
        }
      }

      function toggleDisplay(id) {
        var elements = document.querySelectorAll("." + id);

        for (var i = 0, len = elements.length; i < len; i++) {
          elements[i].classList.toggle("d-none");
        }
      }

      function toggleAll() {
        var elements = document.querySelectorAll("input");

        // starting from 1 since 0 is the "toggle all" input
        for (var i = 1, len = elements.length; i < len; i++) {
          var el = elements[i];

          if (el.checked) {
            el.checked = false;
          } else {
            el.checked = true;
          }

          toggleDisplay(el.id);
        }
      }
      window.addEventListener("load", initExpandables);
    </script>
  </head>
  <body>
    <div id="header" class="header">
      <h1>Cppcheck report - [<a href=https://github.com/quinoacomputing/quinoa/commit/-128-NOTFOUND>-128-NOTFOUND</a>]: /tmp/TeamCity-2/work/5ad443c8abe7fc0a/src/Control/Inciter/InputDeck/LuaParser.hpp</h1>
    </div>
    <div class="wrapper">
      <div id="menu">
       <p id="filename"><a href="index.html">Defects:</a> LuaParser.hpp</p>
<a href="36.html#line-43"> passedByValue 43</a><a href="36.html#line-50"> passedByValue 50</a><a href="36.html#line-58"> passedByValue 58</a><a href="36.html#line-88"> passedByValue 88</a><a href="36.html#line-110"> passedByValue 110</a><a href="36.html#line-132"> passedByValue 132</a><a href="36.html#line-156"> passedByValue 156</a>
    </div>
    <div id="content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209</pre></div></td><td class="code"><div class="highlight"><pre><span></span><a name="line-1"></a><span class="c1">// *****************************************************************************</span>
<a name="line-2"></a><span class="cm">/*!</span>
<a name="line-3"></a><span class="cm">  \file      src/Control/Inciter/InputDeck/LuaParser.hpp</span>
<a name="line-4"></a><span class="cm">  \copyright 2019-2023 Triad National Security, LLC.</span>
<a name="line-5"></a><span class="cm">             All rights reserved. See the LICENSE file for details.</span>
<a name="line-6"></a><span class="cm">  \brief     Inciter&#39;s lua input deck file parser</span>
<a name="line-7"></a><span class="cm">  \details   This file declares the input deck, i.e., control file, parser for</span>
<a name="line-8"></a><span class="cm">    the computational shock hydrodynamics tool, Inciter.</span>
<a name="line-9"></a><span class="cm">*/</span>
<a name="line-10"></a><span class="c1">// *****************************************************************************</span>
<a name="line-11"></a><span class="cp">#ifndef InciterLuaParser_h</span>
<a name="line-12"></a><span class="cp">#define InciterLuaParser_h</span>
<a name="line-13"></a>
<a name="line-14"></a><span class="cp">#include</span> <span class="cpf">&quot;NoWarning/sol.hpp&quot;</span><span class="cp"></span>
<a name="line-15"></a>
<a name="line-16"></a><span class="cp">#include</span> <span class="cpf">&quot;Inciter/CmdLine/CmdLine.hpp&quot;</span><span class="cp"></span>
<a name="line-17"></a><span class="cp">#include</span> <span class="cpf">&quot;InputDeck.hpp&quot;</span><span class="cp"></span>
<a name="line-18"></a>
<a name="line-19"></a><span class="k">namespace</span> <span class="n">tk</span> <span class="p">{</span> <span class="k">class</span> <span class="nc">Print</span><span class="p">;</span> <span class="p">}</span>
<a name="line-20"></a>
<a name="line-21"></a><span class="k">namespace</span> <span class="n">inciter</span> <span class="p">{</span>
<a name="line-22"></a>
<a name="line-23"></a><span class="c1">//! \brief Control file lua-parser for Inciter.</span>
<a name="line-24"></a><span class="c1">//! \details This class is used to interface with sol2, for the purpose of</span>
<a name="line-25"></a><span class="c1">//!   parsing the control file for the computational shock hydrodynamics tool,</span>
<a name="line-26"></a><span class="c1">//!   Inciter.</span>
<a name="line-27"></a><span class="k">class</span> <span class="nc">LuaParser</span> <span class="p">{</span>
<a name="line-28"></a>
<a name="line-29"></a>  <span class="k">public</span><span class="o">:</span>
<a name="line-30"></a>    <span class="c1">//! Constructor</span>
<a name="line-31"></a>    <span class="k">explicit</span> <span class="n">LuaParser</span><span class="p">(</span> <span class="k">const</span> <span class="n">tk</span><span class="o">::</span><span class="n">Print</span><span class="o">&amp;</span> <span class="n">print</span><span class="p">,</span>
<a name="line-32"></a>                              <span class="k">const</span> <span class="n">ctr</span><span class="o">::</span><span class="n">CmdLine</span><span class="o">&amp;</span> <span class="n">cmdline</span><span class="p">,</span>
<a name="line-33"></a>                              <span class="n">ctr</span><span class="o">::</span><span class="n">InputDeck</span><span class="o">&amp;</span> <span class="n">inputdeck</span> <span class="p">);</span>
<a name="line-34"></a>
<a name="line-35"></a>    <span class="c1">//! Store lua inputdeck in custom struct</span>
<a name="line-36"></a>    <span class="kt">void</span> <span class="nf">storeInputDeck</span><span class="p">(</span>
<a name="line-37"></a>      <span class="k">const</span> <span class="n">sol</span><span class="o">::</span><span class="n">table</span><span class="o">&amp;</span> <span class="n">lua_ideck</span><span class="p">,</span>
<a name="line-38"></a>      <span class="n">ctr</span><span class="o">::</span><span class="n">InputDeck</span><span class="o">&amp;</span> <span class="n">gideck</span> <span class="p">);</span>
<a name="line-39"></a>
<a name="line-40"></a>    <span class="c1">//! Check and store material property into inpudeck storage</span>
<a name="line-41"></a>    <span class="kt">void</span> <span class="nf">checkStoreMatProp</span><span class="p">(</span>
<a name="line-42"></a>      <span class="k">const</span> <span class="n">sol</span><span class="o">::</span><span class="n">table</span> <span class="n">table</span><span class="p">,</span>
<a name="line-43"></a><span class="hll">      <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">key</span><span class="p">,</span><div class="verbose expandable"><span class="error2">&lt;--- Function parameter 'key' should be passed by const reference. <span class="marker">[+]</span></span><div class="content">Parameter &apos;key&apos; is passed by value. It could be passed as a const reference which is usually faster and recommended in C++.</div></div>
</span><a name="line-44"></a>      <span class="n">std</span><span class="o">::</span><span class="kt">size_t</span> <span class="n">vecsize</span><span class="p">,</span>
<a name="line-45"></a>      <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span> <span class="n">tk</span><span class="o">::</span><span class="n">real</span> <span class="o">&gt;&amp;</span> <span class="n">storage</span> <span class="p">);</span>
<a name="line-46"></a>
<a name="line-47"></a>    <span class="c1">//! Check and store material property vector into inpudeck storage</span>
<a name="line-48"></a>    <span class="kt">void</span> <span class="nf">checkStoreMatPropVec</span><span class="p">(</span>
<a name="line-49"></a>      <span class="k">const</span> <span class="n">sol</span><span class="o">::</span><span class="n">table</span> <span class="n">table</span><span class="p">,</span>
<a name="line-50"></a><span class="hll">      <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">key</span><span class="p">,</span><div class="verbose expandable"><span class="error2">&lt;--- Function parameter 'key' should be passed by const reference. <span class="marker">[+]</span></span><div class="content">Parameter &apos;key&apos; is passed by value. It could be passed as a const reference which is usually faster and recommended in C++.</div></div>
</span><a name="line-51"></a>      <span class="n">std</span><span class="o">::</span><span class="kt">size_t</span> <span class="n">nspec</span><span class="p">,</span>
<a name="line-52"></a>      <span class="n">std</span><span class="o">::</span><span class="kt">size_t</span> <span class="n">vecsize</span><span class="p">,</span>
<a name="line-53"></a>      <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span> <span class="n">tk</span><span class="o">::</span><span class="n">real</span> <span class="o">&gt;&gt;&amp;</span> <span class="n">storage</span> <span class="p">);</span>
<a name="line-54"></a>
<a name="line-55"></a>    <span class="c1">//! Check and store material property vector of vectors into inpudeck storage</span>
<a name="line-56"></a>    <span class="kt">void</span> <span class="nf">checkStoreMatPropVecVec</span><span class="p">(</span>
<a name="line-57"></a>      <span class="k">const</span> <span class="n">sol</span><span class="o">::</span><span class="n">table</span> <span class="n">table</span><span class="p">,</span>
<a name="line-58"></a><span class="hll">      <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">key</span><span class="p">,</span><div class="verbose expandable"><span class="error2">&lt;--- Function parameter 'key' should be passed by const reference. <span class="marker">[+]</span></span><div class="content">Parameter &apos;key&apos; is passed by value. It could be passed as a const reference which is usually faster and recommended in C++.</div></div>
</span><a name="line-59"></a>      <span class="n">std</span><span class="o">::</span><span class="kt">size_t</span> <span class="n">nspec</span><span class="p">,</span>
<a name="line-60"></a>      <span class="n">std</span><span class="o">::</span><span class="kt">size_t</span> <span class="n">vecsize1</span><span class="p">,</span>
<a name="line-61"></a>      <span class="n">std</span><span class="o">::</span><span class="kt">size_t</span> <span class="n">vecsize2</span><span class="p">,</span>
<a name="line-62"></a>      <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span> <span class="n">tk</span><span class="o">::</span><span class="n">real</span> <span class="o">&gt;&gt;&gt;&amp;</span> <span class="n">storage</span> <span class="p">);</span>
<a name="line-63"></a>
<a name="line-64"></a>    <span class="c1">//! Check and store field output variables</span>
<a name="line-65"></a>    <span class="kt">void</span> <span class="nf">addOutVar</span><span class="p">(</span>
<a name="line-66"></a>      <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">varname</span><span class="p">,</span>
<a name="line-67"></a>      <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">alias</span><span class="p">,</span>
<a name="line-68"></a>      <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span> <span class="kt">char</span> <span class="o">&gt;&amp;</span> <span class="n">depv</span><span class="p">,</span>
<a name="line-69"></a>      <span class="n">std</span><span class="o">::</span><span class="kt">size_t</span> <span class="n">nmat</span><span class="p">,</span>
<a name="line-70"></a>      <span class="n">std</span><span class="o">::</span><span class="kt">size_t</span> <span class="n">nspec</span><span class="p">,</span>
<a name="line-71"></a>      <span class="n">inciter</span><span class="o">::</span><span class="n">ctr</span><span class="o">::</span><span class="n">PDEType</span> <span class="n">pde</span><span class="p">,</span>
<a name="line-72"></a>      <span class="n">tk</span><span class="o">::</span><span class="n">Centering</span> <span class="n">c</span><span class="p">,</span>
<a name="line-73"></a>      <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span> <span class="n">inciter</span><span class="o">::</span><span class="n">ctr</span><span class="o">::</span><span class="n">OutVar</span> <span class="o">&gt;&amp;</span> <span class="n">foutvar</span> <span class="p">);</span>
<a name="line-74"></a>
<a name="line-75"></a>  <span class="k">private</span><span class="o">:</span>
<a name="line-76"></a>    <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">m_filename</span><span class="p">;</span>             <span class="c1">//!&lt; Name of file to parse</span>
<a name="line-77"></a>
<a name="line-78"></a>    <span class="c1">//! Assign parameter to inputdeck entry if specified, else default</span>
<a name="line-79"></a>    <span class="c1">//! \tparam N Type of parameter being read/assigned</span>
<a name="line-80"></a>    <span class="c1">//! \param[in] table Sol-table which contains said parameter</span>
<a name="line-81"></a>    <span class="c1">//! \param[in] key Key for said parameter in Sol-table</span>
<a name="line-82"></a>    <span class="c1">//! \param[in,out] storage Storage space in inputdeck where said parameter</span>
<a name="line-83"></a>    <span class="c1">//!   is to be stored</span>
<a name="line-84"></a>    <span class="c1">//! \param[in] dflt Default value of said parameter, if unspecified</span>
<a name="line-85"></a>    <span class="k">template</span><span class="o">&lt;</span> <span class="k">typename</span> <span class="nc">N</span> <span class="o">&gt;</span> <span class="kt">void</span>
<a name="line-86"></a>    <span class="n">storeIfSpecd</span><span class="p">(</span>
<a name="line-87"></a>      <span class="k">const</span> <span class="n">sol</span><span class="o">::</span><span class="n">table</span> <span class="n">table</span><span class="p">,</span>
<a name="line-88"></a><span class="hll">      <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">key</span><span class="p">,</span><div class="verbose expandable"><span class="error2">&lt;--- Function parameter 'key' should be passed by const reference. <span class="marker">[+]</span></span><div class="content">Parameter &apos;key&apos; is passed by value. It could be passed as a const reference which is usually faster and recommended in C++.</div></div>
</span><a name="line-89"></a>      <span class="n">N</span><span class="o">&amp;</span> <span class="n">storage</span><span class="p">,</span>
<a name="line-90"></a>      <span class="k">const</span> <span class="n">N</span> <span class="n">dflt</span> <span class="p">)</span>
<a name="line-91"></a>    <span class="p">{</span>
<a name="line-92"></a>      <span class="k">auto</span> <span class="n">sol_var</span> <span class="o">=</span> <span class="n">table</span><span class="p">[</span><span class="n">key</span><span class="p">];</span>
<a name="line-93"></a>      <span class="k">if</span> <span class="p">(</span><span class="n">sol_var</span><span class="p">.</span><span class="n">valid</span><span class="p">())</span>
<a name="line-94"></a>        <span class="n">storage</span> <span class="o">=</span> <span class="n">sol_var</span><span class="p">;</span>
<a name="line-95"></a>      <span class="k">else</span>
<a name="line-96"></a>        <span class="n">storage</span> <span class="o">=</span> <span class="n">dflt</span><span class="p">;</span>
<a name="line-97"></a>    <span class="p">}</span>
<a name="line-98"></a>
<a name="line-99"></a>    <span class="c1">//! Assign Option to inputdeck entry if specified, else default</span>
<a name="line-100"></a>    <span class="c1">//! \tparam Op Option-Type of parameter being read/assigned</span>
<a name="line-101"></a>    <span class="c1">//! \tparam OpClass Option-class of parameter being read/assigned</span>
<a name="line-102"></a>    <span class="c1">//! \param[in] table Sol-table which contains said parameter</span>
<a name="line-103"></a>    <span class="c1">//! \param[in] key Key for said parameter in Sol-table</span>
<a name="line-104"></a>    <span class="c1">//! \param[in,out] storage Storage space in inputdeck where said parameter</span>
<a name="line-105"></a>    <span class="c1">//!   is to be stored</span>
<a name="line-106"></a>    <span class="c1">//! \param[in] dflt Default value of said parameter, if unspecified</span>
<a name="line-107"></a>    <span class="k">template</span><span class="o">&lt;</span> <span class="k">typename</span> <span class="nc">Op</span><span class="p">,</span> <span class="k">class</span> <span class="nc">OpClass</span> <span class="o">&gt;</span> <span class="kt">void</span>
<a name="line-108"></a>    <span class="n">storeOptIfSpecd</span><span class="p">(</span>
<a name="line-109"></a>      <span class="k">const</span> <span class="n">sol</span><span class="o">::</span><span class="n">table</span> <span class="n">table</span><span class="p">,</span>
<a name="line-110"></a><span class="hll">      <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">key</span><span class="p">,</span><div class="verbose expandable"><span class="error2">&lt;--- Function parameter 'key' should be passed by const reference. <span class="marker">[+]</span></span><div class="content">Parameter &apos;key&apos; is passed by value. It could be passed as a const reference which is usually faster and recommended in C++.</div></div>
</span><a name="line-111"></a>      <span class="n">Op</span><span class="o">&amp;</span> <span class="n">storage</span><span class="p">,</span>
<a name="line-112"></a>      <span class="k">const</span> <span class="n">Op</span> <span class="n">dflt</span> <span class="p">)</span>
<a name="line-113"></a>    <span class="p">{</span>
<a name="line-114"></a>      <span class="n">OpClass</span> <span class="n">opt</span><span class="p">;</span>
<a name="line-115"></a>      <span class="k">auto</span> <span class="n">sol_var</span> <span class="o">=</span> <span class="n">table</span><span class="p">[</span><span class="n">key</span><span class="p">];</span>
<a name="line-116"></a>      <span class="k">if</span> <span class="p">(</span><span class="n">sol_var</span><span class="p">.</span><span class="n">valid</span><span class="p">())</span>
<a name="line-117"></a>        <span class="n">storage</span> <span class="o">=</span> <span class="n">opt</span><span class="p">.</span><span class="n">value</span><span class="p">(</span><span class="n">sol_var</span><span class="p">);</span>
<a name="line-118"></a>      <span class="k">else</span>
<a name="line-119"></a>        <span class="n">storage</span> <span class="o">=</span> <span class="n">dflt</span><span class="p">;</span>
<a name="line-120"></a>    <span class="p">}</span>
<a name="line-121"></a>
<a name="line-122"></a>    <span class="c1">//! Assign vector parameter to inputdeck entry if specified, else default</span>
<a name="line-123"></a>    <span class="c1">//! \tparam N Type of parameter vector being read/assigned</span>
<a name="line-124"></a>    <span class="c1">//! \param[in] table Sol-table which contains said parameter</span>
<a name="line-125"></a>    <span class="c1">//! \param[in] key Key for said parameter in Sol-table</span>
<a name="line-126"></a>    <span class="c1">//! \param[in,out] storage Storage space in inputdeck where said parameter</span>
<a name="line-127"></a>    <span class="c1">//!   is to be stored</span>
<a name="line-128"></a>    <span class="c1">//! \param[in] dflt Default value of said parameter, if unspecified</span>
<a name="line-129"></a>    <span class="k">template</span><span class="o">&lt;</span> <span class="k">typename</span> <span class="nc">N</span> <span class="o">&gt;</span> <span class="kt">void</span>
<a name="line-130"></a>    <span class="n">storeVecIfSpecd</span><span class="p">(</span>
<a name="line-131"></a>      <span class="k">const</span> <span class="n">sol</span><span class="o">::</span><span class="n">table</span> <span class="n">table</span><span class="p">,</span>
<a name="line-132"></a><span class="hll">      <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">key</span><span class="p">,</span><div class="verbose expandable"><span class="error2">&lt;--- Function parameter 'key' should be passed by const reference. <span class="marker">[+]</span></span><div class="content">Parameter &apos;key&apos; is passed by value. It could be passed as a const reference which is usually faster and recommended in C++.</div></div>
</span><a name="line-133"></a>      <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span> <span class="n">N</span> <span class="o">&gt;&amp;</span> <span class="n">storage</span><span class="p">,</span>
<a name="line-134"></a>      <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span> <span class="n">N</span> <span class="o">&gt;&amp;</span> <span class="n">dflt</span> <span class="p">)</span>
<a name="line-135"></a>    <span class="p">{</span>
<a name="line-136"></a>      <span class="k">auto</span> <span class="n">sol_vec</span> <span class="o">=</span> <span class="n">table</span><span class="p">[</span><span class="n">key</span><span class="p">];</span>
<a name="line-137"></a>      <span class="k">if</span> <span class="p">(</span><span class="n">sol_vec</span><span class="p">.</span><span class="n">valid</span><span class="p">())</span> <span class="p">{</span>
<a name="line-138"></a>        <span class="k">for</span> <span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="kt">size_t</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">sol</span><span class="o">::</span><span class="n">table</span><span class="p">(</span><span class="n">sol_vec</span><span class="p">).</span><span class="n">size</span><span class="p">();</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span>
<a name="line-139"></a>          <span class="n">storage</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">sol_vec</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]);</span>
<a name="line-140"></a>      <span class="p">}</span>
<a name="line-141"></a>      <span class="k">else</span>
<a name="line-142"></a>        <span class="n">storage</span> <span class="o">=</span> <span class="n">dflt</span><span class="p">;</span>
<a name="line-143"></a>    <span class="p">}</span>
<a name="line-144"></a>
<a name="line-145"></a>    <span class="c1">//! Assign vector of Options to inputdeck entry if specified, else default</span>
<a name="line-146"></a>    <span class="c1">//! \tparam Op Option-Type of parameter being read/assigned</span>
<a name="line-147"></a>    <span class="c1">//! \tparam OpClass Option-class of parameter being read/assigned</span>
<a name="line-148"></a>    <span class="c1">//! \param[in] table Sol-table which contains said parameter</span>
<a name="line-149"></a>    <span class="c1">//! \param[in] key Key for said parameter in Sol-table</span>
<a name="line-150"></a>    <span class="c1">//! \param[in,out] storage Storage space in inputdeck where said parameter</span>
<a name="line-151"></a>    <span class="c1">//!   is to be stored</span>
<a name="line-152"></a>    <span class="c1">//! \param[in] dflt Default value of said parameter, if unspecified</span>
<a name="line-153"></a>    <span class="k">template</span><span class="o">&lt;</span> <span class="k">typename</span> <span class="nc">Op</span><span class="p">,</span> <span class="k">class</span> <span class="nc">OpClass</span> <span class="o">&gt;</span> <span class="kt">void</span>
<a name="line-154"></a>    <span class="n">storeOptVecIfSpecd</span><span class="p">(</span>
<a name="line-155"></a>      <span class="k">const</span> <span class="n">sol</span><span class="o">::</span><span class="n">table</span> <span class="n">table</span><span class="p">,</span>
<a name="line-156"></a><span class="hll">      <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">key</span><span class="p">,</span><div class="verbose expandable"><span class="error2">&lt;--- Function parameter 'key' should be passed by const reference. <span class="marker">[+]</span></span><div class="content">Parameter &apos;key&apos; is passed by value. It could be passed as a const reference which is usually faster and recommended in C++.</div></div>
</span><a name="line-157"></a>      <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span> <span class="n">Op</span> <span class="o">&gt;&amp;</span> <span class="n">storage</span><span class="p">,</span>
<a name="line-158"></a>      <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span> <span class="n">Op</span> <span class="o">&gt;&amp;</span> <span class="n">dflt</span> <span class="p">)</span>
<a name="line-159"></a>    <span class="p">{</span>
<a name="line-160"></a>      <span class="n">OpClass</span> <span class="n">opt</span><span class="p">;</span>
<a name="line-161"></a>      <span class="k">auto</span> <span class="n">sol_vec</span> <span class="o">=</span> <span class="n">table</span><span class="p">[</span><span class="n">key</span><span class="p">];</span>
<a name="line-162"></a>      <span class="k">if</span> <span class="p">(</span><span class="n">sol_vec</span><span class="p">.</span><span class="n">valid</span><span class="p">())</span> <span class="p">{</span>
<a name="line-163"></a>        <span class="k">for</span> <span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="kt">size_t</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">sol</span><span class="o">::</span><span class="n">table</span><span class="p">(</span><span class="n">sol_vec</span><span class="p">).</span><span class="n">size</span><span class="p">();</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span>
<a name="line-164"></a>          <span class="n">storage</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">opt</span><span class="p">.</span><span class="n">value</span><span class="p">(</span><span class="n">sol_vec</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]));</span>
<a name="line-165"></a>      <span class="p">}</span>
<a name="line-166"></a>      <span class="k">else</span>
<a name="line-167"></a>        <span class="n">storage</span> <span class="o">=</span> <span class="n">dflt</span><span class="p">;</span>
<a name="line-168"></a>    <span class="p">}</span>
<a name="line-169"></a>
<a name="line-170"></a>    <span class="c1">//! \brief Check validity of keywords within a particular block</span>
<a name="line-171"></a>    <span class="c1">//! \tparam tags Tags addressing the said block in the input deck</span>
<a name="line-172"></a>    <span class="c1">//! \param[in] block Sol table of the input deck block read in from the</span>
<a name="line-173"></a>    <span class="c1">//!   lua file</span>
<a name="line-174"></a>    <span class="c1">//! \param[in] blk_name Name of the block, for error clarity</span>
<a name="line-175"></a>    <span class="k">template</span><span class="o">&lt;</span> <span class="k">typename</span><span class="p">...</span> <span class="n">tags</span> <span class="o">&gt;</span>
<a name="line-176"></a>    <span class="kt">void</span> <span class="n">checkBlock</span><span class="p">(</span><span class="k">const</span> <span class="n">sol</span><span class="o">::</span><span class="n">table</span><span class="o">&amp;</span> <span class="n">block</span><span class="p">,</span> <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">blk_name</span><span class="p">)</span> <span class="k">const</span>
<a name="line-177"></a>    <span class="p">{</span>
<a name="line-178"></a>      <span class="k">for</span> <span class="p">(</span><span class="k">const</span> <span class="k">auto</span><span class="o">&amp;</span> <span class="nl">kvp</span> <span class="p">:</span> <span class="n">block</span><span class="p">)</span> <span class="p">{</span>
<a name="line-179"></a>        <span class="kt">bool</span> <span class="nf">is_valid</span><span class="p">(</span><span class="nb">false</span><span class="p">);</span>
<a name="line-180"></a>        <span class="k">auto</span> <span class="n">ukw</span> <span class="o">=</span> <span class="n">kvp</span><span class="p">.</span><span class="n">first</span><span class="p">.</span><span class="n">as</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span><span class="p">();</span>
<a name="line-181"></a>        <span class="n">brigand</span><span class="o">::</span><span class="n">for_each</span><span class="o">&lt;</span> <span class="n">tags</span><span class="p">...</span> <span class="o">&gt;</span><span class="p">(</span> <span class="n">checkKw</span><span class="p">(</span><span class="n">ukw</span><span class="p">,</span> <span class="n">is_valid</span><span class="p">)</span> <span class="p">);</span>
<a name="line-182"></a>        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">is_valid</span><span class="p">)</span>
<a name="line-183"></a>          <span class="n">Throw</span><span class="p">(</span><span class="s">&quot;Invalid keyword &#39;&quot;</span> <span class="o">+</span> <span class="n">ukw</span> <span class="o">+</span> <span class="s">&quot;&#39; in &#39;&quot;</span> <span class="o">+</span> <span class="n">blk_name</span> <span class="o">+</span> <span class="s">&quot;&#39; block.&quot;</span><span class="p">);</span>
<a name="line-184"></a>      <span class="p">}</span>
<a name="line-185"></a>    <span class="p">}</span>
<a name="line-186"></a>
<a name="line-187"></a>    <span class="c1">// Check if a keyword matches the existing ones</span>
<a name="line-188"></a>    <span class="k">struct</span> <span class="nc">checkKw</span> <span class="p">{</span>
<a name="line-189"></a>      <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">user_kw</span><span class="p">;</span>
<a name="line-190"></a>      <span class="c1">// reference to bool keeping track of kw-match</span>
<a name="line-191"></a>      <span class="kt">bool</span><span class="o">&amp;</span> <span class="n">is_valid</span><span class="p">;</span>
<a name="line-192"></a>      <span class="c1">// Constructor</span>
<a name="line-193"></a>      <span class="n">checkKw</span><span class="p">(</span> <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">ukw</span><span class="p">,</span> <span class="kt">bool</span><span class="o">&amp;</span> <span class="n">isv</span> <span class="p">)</span> <span class="o">:</span>
<a name="line-194"></a>        <span class="n">user_kw</span><span class="p">(</span><span class="n">ukw</span><span class="p">),</span> <span class="n">is_valid</span><span class="p">(</span><span class="n">isv</span><span class="p">)</span> <span class="p">{}</span>
<a name="line-195"></a>      <span class="c1">//! Function to call for each keyword type</span>
<a name="line-196"></a>      <span class="k">template</span><span class="o">&lt;</span> <span class="k">typename</span> <span class="nc">U</span> <span class="o">&gt;</span> <span class="kt">void</span> <span class="k">operator</span><span class="p">()(</span> <span class="n">brigand</span><span class="o">::</span><span class="n">type_</span><span class="o">&lt;</span><span class="n">U</span><span class="o">&gt;</span> <span class="p">)</span> <span class="p">{</span>
<a name="line-197"></a>        <span class="k">auto</span> <span class="n">spec_key</span> <span class="o">=</span> <span class="n">U</span><span class="o">::</span><span class="n">name</span><span class="p">();</span>
<a name="line-198"></a>        <span class="c1">// only check if not previously matched</span>
<a name="line-199"></a>        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">is_valid</span><span class="p">)</span> <span class="p">{</span>
<a name="line-200"></a>          <span class="k">if</span> <span class="p">(</span><span class="n">user_kw</span> <span class="o">==</span> <span class="n">spec_key</span><span class="p">)</span> <span class="n">is_valid</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
<a name="line-201"></a>          <span class="k">else</span> <span class="n">is_valid</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
<a name="line-202"></a>        <span class="p">}</span>
<a name="line-203"></a>      <span class="p">}</span>
<a name="line-204"></a>    <span class="p">};</span>
<a name="line-205"></a><span class="p">};</span>
<a name="line-206"></a>
<a name="line-207"></a><span class="p">}</span> <span class="c1">// namespace inciter</span>
<a name="line-208"></a>
<a name="line-209"></a><span class="cp">#endif </span><span class="c1">// InciterLuaParser_h</span>
</pre></div>
</td></tr></table>
      </div> <!-- /.wrapper -->
    </div>
    <div id="footer" class="footer">
      <p>
        Cppcheck 2.3 - a tool for static C/C++ code analysis<br>
        <br>
        Internet: <a href="http://cppcheck.net">http://cppcheck.net</a><br>
        IRC: <a href="irc://irc.freenode.net/cppcheck">irc://irc.freenode.net/cppcheck</a><br>
      </p>
    </div>
  </body>
</html>
