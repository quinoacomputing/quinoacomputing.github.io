
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Cppcheck - HTML report - [<a href=https://github.com/quinoacomputing/quinoa/commit/dfc2d0e79>Quinoa_v0.3-984-gdfc2d0e79</a>]</title>
    <link rel="stylesheet" href="style.css">
    <style>
pre { line-height: 125%; margin: 0; }
td.linenos pre { color: #000000; background-color: #f0f0f0; padding: 0 5px 0 5px; }
span.linenos { color: #000000; background-color: #f0f0f0; padding: 0 5px 0 5px; }
td.linenos pre.special { color: #000000; background-color: #ffffc0; padding: 0 5px 0 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding: 0 5px 0 5px; }
.highlight .hll { background-color: #ffffcc }
.highlight { background: #ffffff; }
.highlight .c { color: #888888 } /* Comment */
.highlight .err { color: #FF0000; background-color: #FFAAAA } /* Error */
.highlight .k { color: #008800; font-weight: bold } /* Keyword */
.highlight .o { color: #333333 } /* Operator */
.highlight .ch { color: #888888 } /* Comment.Hashbang */
.highlight .cm { color: #888888 } /* Comment.Multiline */
.highlight .cp { color: #557799 } /* Comment.Preproc */
.highlight .cpf { color: #888888 } /* Comment.PreprocFile */
.highlight .c1 { color: #888888 } /* Comment.Single */
.highlight .cs { color: #cc0000; font-weight: bold } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .gr { color: #FF0000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #00A000 } /* Generic.Inserted */
.highlight .go { color: #888888 } /* Generic.Output */
.highlight .gp { color: #c65d09; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008800; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008800; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008800; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #003388; font-weight: bold } /* Keyword.Pseudo */
.highlight .kr { color: #008800; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #333399; font-weight: bold } /* Keyword.Type */
.highlight .m { color: #6600EE; font-weight: bold } /* Literal.Number */
.highlight .s { background-color: #fff0f0 } /* Literal.String */
.highlight .na { color: #0000CC } /* Name.Attribute */
.highlight .nb { color: #007020 } /* Name.Builtin */
.highlight .nc { color: #BB0066; font-weight: bold } /* Name.Class */
.highlight .no { color: #003366; font-weight: bold } /* Name.Constant */
.highlight .nd { color: #555555; font-weight: bold } /* Name.Decorator */
.highlight .ni { color: #880000; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #FF0000; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0066BB; font-weight: bold } /* Name.Function */
.highlight .nl { color: #997700; font-weight: bold } /* Name.Label */
.highlight .nn { color: #0e84b5; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #007700 } /* Name.Tag */
.highlight .nv { color: #996633 } /* Name.Variable */
.highlight .ow { color: #000000; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #6600EE; font-weight: bold } /* Literal.Number.Bin */
.highlight .mf { color: #6600EE; font-weight: bold } /* Literal.Number.Float */
.highlight .mh { color: #005588; font-weight: bold } /* Literal.Number.Hex */
.highlight .mi { color: #0000DD; font-weight: bold } /* Literal.Number.Integer */
.highlight .mo { color: #4400EE; font-weight: bold } /* Literal.Number.Oct */
.highlight .sa { background-color: #fff0f0 } /* Literal.String.Affix */
.highlight .sb { background-color: #fff0f0 } /* Literal.String.Backtick */
.highlight .sc { color: #0044DD } /* Literal.String.Char */
.highlight .dl { background-color: #fff0f0 } /* Literal.String.Delimiter */
.highlight .sd { color: #DD4422 } /* Literal.String.Doc */
.highlight .s2 { background-color: #fff0f0 } /* Literal.String.Double */
.highlight .se { color: #666666; font-weight: bold; background-color: #fff0f0 } /* Literal.String.Escape */
.highlight .sh { background-color: #fff0f0 } /* Literal.String.Heredoc */
.highlight .si { background-color: #eeeeee } /* Literal.String.Interpol */
.highlight .sx { color: #DD2200; background-color: #fff0f0 } /* Literal.String.Other */
.highlight .sr { color: #000000; background-color: #fff0ff } /* Literal.String.Regex */
.highlight .s1 { background-color: #fff0f0 } /* Literal.String.Single */
.highlight .ss { color: #AA6600 } /* Literal.String.Symbol */
.highlight .bp { color: #007020 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0066BB; font-weight: bold } /* Name.Function.Magic */
.highlight .vc { color: #336699 } /* Name.Variable.Class */
.highlight .vg { color: #dd7700; font-weight: bold } /* Name.Variable.Global */
.highlight .vi { color: #3333BB } /* Name.Variable.Instance */
.highlight .vm { color: #996633 } /* Name.Variable.Magic */
.highlight .il { color: #0000DD; font-weight: bold } /* Literal.Number.Integer.Long */
    </style>
    <script>
      function getStyle(el, styleProp) {
        var y;

        if (el.currentStyle) {
          y = el.currentStyle[styleProp];
        } else if (window.getComputedStyle) {
          y = document.defaultView.getComputedStyle(el, null).getPropertyValue(styleProp);
        }

        return y;
      }

      function toggle() {
        var el = this.expandable_content;
        var mark = this.expandable_marker;

        if (el.style.display === "block") {
          el.style.display = "none";
          mark.textContent = "[+]";
        } else {
          el.style.display = "block";
          mark.textContent = "[-]";
        }
      }

      function initExpandables() {
        var elements = document.querySelectorAll(".expandable");

        for (var i = 0, len = elements.length; i < len; i++) {
          var el = elements[i];
          var clickable = el.querySelector("span");
          var marker = clickable.querySelector(".marker");
          var content = el.querySelector(".content");
          var width = clickable.clientWidth - parseInt(getStyle(content, "padding-left")) - parseInt(getStyle(content, "padding-right"));
          content.style.width = width + "px";
          clickable.expandable_content = content;
          clickable.expandable_marker = marker;
          clickable.addEventListener("click", toggle);
        }
      }

      function toggleDisplay(id) {
        var elements = document.querySelectorAll("." + id);

        for (var i = 0, len = elements.length; i < len; i++) {
          elements[i].classList.toggle("d-none");
        }
      }

      function toggleAll() {
        var elements = document.querySelectorAll("input");

        // starting from 1 since 0 is the "toggle all" input
        for (var i = 1, len = elements.length; i < len; i++) {
          var el = elements[i];

          if (el.checked) {
            el.checked = false;
          } else {
            el.checked = true;
          }

          toggleDisplay(el.id);
        }
      }
      window.addEventListener("load", initExpandables);
    </script>
  </head>
  <body>
    <div id="header" class="header">
      <h1>Cppcheck report - [<a href=https://github.com/quinoacomputing/quinoa/commit/dfc2d0e79>Quinoa_v0.3-984-gdfc2d0e79</a>]: /home/apandare/TeamCity/BuildAgent3/work/65043de74745064a/src/Main/MeshConvDriver.cpp</h1>
    </div>
    <div class="wrapper">
      <div id="menu">
       <p id="filename"><a href="index.html">Defects:</a> MeshConvDriver.cpp</p>
<a href="26.html#line-41"> useInitializationList 41</a><a href="26.html#line-43"> useInitializationList 43</a>
    </div>
    <div id="content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186</pre></div></td><td class="code"><div class="highlight"><pre><span></span><a name="line-1"></a><span class="c1">// *****************************************************************************</span>
<a name="line-2"></a><span class="cm">/*!</span>
<a name="line-3"></a><span class="cm">  \file      src/Main/MeshConvDriver.cpp</span>
<a name="line-4"></a><span class="cm">  \copyright 2012-2015 J. Bakosi,</span>
<a name="line-5"></a><span class="cm">             2016-2018 Los Alamos National Security, LLC.,</span>
<a name="line-6"></a><span class="cm">             2019-2021 Triad National Security, LLC.</span>
<a name="line-7"></a><span class="cm">             All rights reserved. See the LICENSE file for details.</span>
<a name="line-8"></a><span class="cm">  \brief     Mesh converter driver</span>
<a name="line-9"></a><span class="cm">  \details   Mesh converter driver.</span>
<a name="line-10"></a><span class="cm">*/</span>
<a name="line-11"></a><span class="c1">// *****************************************************************************</span>
<a name="line-12"></a>
<a name="line-13"></a><span class="cp">#include</span> <span class="cpf">&quot;Types.hpp&quot;</span><span class="cp"></span>
<a name="line-14"></a><span class="cp">#include</span> <span class="cpf">&quot;Tags.hpp&quot;</span><span class="cp"></span>
<a name="line-15"></a><span class="cp">#include</span> <span class="cpf">&quot;MeshConvDriver.hpp&quot;</span><span class="cp"></span>
<a name="line-16"></a><span class="cp">#include</span> <span class="cpf">&quot;MeshFactory.hpp&quot;</span><span class="cp"></span>
<a name="line-17"></a><span class="cp">#include</span> <span class="cpf">&quot;TaggedTupleDeepPrint.hpp&quot;</span><span class="cp"></span>
<a name="line-18"></a><span class="cp">#include</span> <span class="cpf">&quot;Writer.hpp&quot;</span><span class="cp"></span>
<a name="line-19"></a>
<a name="line-20"></a><span class="cp">#include</span> <span class="cpf">&quot;NoWarning/meshconv.decl.h&quot;</span><span class="cp"></span>
<a name="line-21"></a>
<a name="line-22"></a><span class="k">using</span> <span class="n">meshconv</span><span class="o">::</span><span class="n">MeshConvDriver</span><span class="p">;</span>
<a name="line-23"></a>
<a name="line-24"></a><span class="k">extern</span> <span class="n">CProxy_Main</span> <span class="n">mainProxy</span><span class="p">;</span>
<a name="line-25"></a>
<a name="line-26"></a><span class="n">MeshConvDriver</span><span class="o">::</span><span class="n">MeshConvDriver</span><span class="p">(</span> <span class="k">const</span> <span class="n">ctr</span><span class="o">::</span><span class="n">CmdLine</span><span class="o">&amp;</span> <span class="n">cmdline</span><span class="p">,</span> <span class="kt">int</span> <span class="p">)</span> <span class="o">:</span>
<a name="line-27"></a>  <span class="n">m_print</span><span class="p">(</span> <span class="n">cmdline</span><span class="p">.</span><span class="n">logname</span><span class="p">(</span> <span class="n">cmdline</span><span class="p">.</span><span class="n">get</span><span class="o">&lt;</span> <span class="n">tag</span><span class="o">::</span><span class="n">io</span><span class="p">,</span> <span class="n">tag</span><span class="o">::</span><span class="n">screen</span> <span class="o">&gt;</span><span class="p">(),</span>
<a name="line-28"></a>                            <span class="n">cmdline</span><span class="p">.</span><span class="n">get</span><span class="o">&lt;</span> <span class="n">tag</span><span class="o">::</span><span class="n">io</span><span class="p">,</span> <span class="n">tag</span><span class="o">::</span><span class="n">nrestart</span> <span class="o">&gt;</span><span class="p">()</span> <span class="p">),</span>
<a name="line-29"></a>           <span class="n">cmdline</span><span class="p">.</span><span class="n">get</span><span class="o">&lt;</span> <span class="n">tag</span><span class="o">::</span><span class="n">verbose</span> <span class="o">&gt;</span><span class="p">()</span> <span class="o">?</span> <span class="n">std</span><span class="o">::</span><span class="nl">cout</span> <span class="p">:</span> <span class="n">std</span><span class="o">::</span><span class="n">clog</span><span class="p">,</span>
<a name="line-30"></a>           <span class="n">std</span><span class="o">::</span><span class="n">ios_base</span><span class="o">::</span><span class="n">app</span> <span class="p">),</span>
<a name="line-31"></a>  <span class="n">m_reorder</span><span class="p">(</span> <span class="n">cmdline</span><span class="p">.</span><span class="n">get</span><span class="o">&lt;</span> <span class="n">tag</span><span class="o">::</span><span class="n">reorder</span> <span class="o">&gt;</span><span class="p">()</span> <span class="p">),</span>
<a name="line-32"></a>  <span class="n">m_input</span><span class="p">(),</span>
<a name="line-33"></a>  <span class="n">m_output</span><span class="p">()</span>
<a name="line-34"></a><span class="c1">// *****************************************************************************</span>
<a name="line-35"></a><span class="c1">//  Constructor</span>
<a name="line-36"></a><span class="c1">//! \param[in] cmdline Command line object storing data parsed from the command</span>
<a name="line-37"></a><span class="c1">//!   line arguments</span>
<a name="line-38"></a><span class="c1">// *****************************************************************************</span>
<a name="line-39"></a><span class="p">{</span>
<a name="line-40"></a>  <span class="c1">// Save input file name</span>
<a name="line-41"></a><span class="hll">  <span class="n">m_input</span> <span class="o">=</span> <span class="n">cmdline</span><span class="p">.</span><span class="n">get</span><span class="o">&lt;</span> <span class="n">tag</span><span class="o">::</span><span class="n">io</span><span class="p">,</span> <span class="n">tag</span><span class="o">::</span><span class="n">input</span> <span class="o">&gt;</span><span class="p">();</span><div class="verbose expandable"><span class="error2">&lt;--- Variable 'm_input' is assigned in constructor body. Consider performing initialization in initialization list. <span class="marker">[+]</span></span><div class="content">When an object of a class is created, the constructors of all member variables are called consecutively in the order the variables are declared, even if you don&apos;t explicitly write them to the initialization list. You could avoid assigning &apos;m_input&apos; a value by passing the value to the constructor in the initialization list.</div></div>
</span><a name="line-42"></a>  <span class="c1">// Save output file name</span>
<a name="line-43"></a><span class="hll">  <span class="n">m_output</span> <span class="o">=</span> <span class="n">cmdline</span><span class="p">.</span><span class="n">get</span><span class="o">&lt;</span> <span class="n">tag</span><span class="o">::</span><span class="n">io</span><span class="p">,</span> <span class="n">tag</span><span class="o">::</span><span class="n">output</span> <span class="o">&gt;</span><span class="p">();</span><div class="verbose expandable"><span class="error2">&lt;--- Variable 'm_output' is assigned in constructor body. Consider performing initialization in initialization list. <span class="marker">[+]</span></span><div class="content">When an object of a class is created, the constructors of all member variables are called consecutively in the order the variables are declared, even if you don&apos;t explicitly write them to the initialization list. You could avoid assigning &apos;m_output&apos; a value by passing the value to the constructor in the initialization list.</div></div>
</span><a name="line-44"></a>
<a name="line-45"></a>  <span class="c1">// Output command line object to file</span>
<a name="line-46"></a>  <span class="k">auto</span> <span class="n">logfilename</span> <span class="o">=</span> <span class="n">tk</span><span class="o">::</span><span class="n">meshconv_executable</span><span class="p">()</span> <span class="o">+</span> <span class="s">&quot;_input.log&quot;</span><span class="p">;</span>
<a name="line-47"></a>  <span class="n">tk</span><span class="o">::</span><span class="n">Writer</span> <span class="n">log</span><span class="p">(</span> <span class="n">logfilename</span> <span class="p">);</span>
<a name="line-48"></a>  <span class="n">tk</span><span class="o">::</span><span class="n">print</span><span class="p">(</span> <span class="n">log</span><span class="p">.</span><span class="n">stream</span><span class="p">(),</span> <span class="s">&quot;cmdline&quot;</span><span class="p">,</span> <span class="n">cmdline</span> <span class="p">);</span>
<a name="line-49"></a><span class="p">}</span>
<a name="line-50"></a>
<a name="line-51"></a><span class="kt">void</span>
<a name="line-52"></a><span class="n">MeshConvDriver</span><span class="o">::</span><span class="n">execute</span><span class="p">()</span> <span class="k">const</span>
<a name="line-53"></a><span class="c1">// *****************************************************************************</span>
<a name="line-54"></a><span class="c1">//  Execute: Convert mesh file</span>
<a name="line-55"></a><span class="c1">// *****************************************************************************</span>
<a name="line-56"></a><span class="p">{</span>
<a name="line-57"></a>  <span class="n">m_print</span><span class="p">.</span><span class="n">endsubsection</span><span class="p">();</span>
<a name="line-58"></a>
<a name="line-59"></a>  <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">,</span> <span class="n">tk</span><span class="o">::</span><span class="n">real</span> <span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">times</span><span class="p">;</span>
<a name="line-60"></a>
<a name="line-61"></a>  <span class="c1">// If input filename contains a &#39;%&#39;, we aggregate multiple files</span>
<a name="line-62"></a>  <span class="k">if</span> <span class="p">(</span><span class="n">m_input</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="sc">&#39;%&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">::</span><span class="n">npos</span><span class="p">)</span> <span class="p">{</span>
<a name="line-63"></a>
<a name="line-64"></a>    <span class="c1">// Convert single mesh</span>
<a name="line-65"></a>
<a name="line-66"></a>    <span class="n">times</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span> <span class="p">{}</span> <span class="p">);</span>
<a name="line-67"></a>    <span class="k">auto</span> <span class="n">mesh</span> <span class="o">=</span> <span class="n">tk</span><span class="o">::</span><span class="n">readUnsMesh</span><span class="p">(</span> <span class="n">m_print</span><span class="p">,</span> <span class="n">m_input</span><span class="p">,</span> <span class="n">times</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">);</span>
<a name="line-68"></a>    <span class="k">auto</span> <span class="n">wtimes</span> <span class="o">=</span> <span class="n">tk</span><span class="o">::</span><span class="n">writeUnsMesh</span><span class="p">(</span> <span class="n">m_print</span><span class="p">,</span> <span class="n">m_output</span><span class="p">,</span> <span class="n">mesh</span><span class="p">,</span> <span class="n">m_reorder</span> <span class="p">);</span>
<a name="line-69"></a>    <span class="n">times</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span> <span class="n">end</span><span class="p">(</span><span class="n">times</span><span class="p">),</span> <span class="n">begin</span><span class="p">(</span><span class="n">wtimes</span><span class="p">),</span> <span class="n">end</span><span class="p">(</span><span class="n">wtimes</span><span class="p">)</span> <span class="p">);</span>
<a name="line-70"></a>
<a name="line-71"></a>  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
<a name="line-72"></a>
<a name="line-73"></a>    <span class="c1">// Aggregate multiple meshes containing surface output</span>
<a name="line-74"></a>
<a name="line-75"></a>    <span class="c1">// Find a &#39;%&#39; sign in the input filename, and assuming a syntax of</span>
<a name="line-76"></a>    <span class="c1">// &#39;.&lt;nfile&gt;.%&#39;, find &#39;&lt;nfile&gt;&#39; as the number of files to aggregate.</span>
<a name="line-77"></a>    <span class="k">auto</span> <span class="n">percent_pos</span> <span class="o">=</span> <span class="n">m_input</span><span class="p">.</span><span class="n">find</span><span class="p">(</span> <span class="sc">&#39;%&#39;</span> <span class="p">);</span>
<a name="line-78"></a>    <span class="k">auto</span> <span class="n">input_basename</span> <span class="o">=</span> <span class="n">m_input</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span> <span class="mi">0</span><span class="p">,</span> <span class="n">percent_pos</span> <span class="p">);</span>
<a name="line-79"></a>    <span class="k">auto</span> <span class="n">dot1</span> <span class="o">=</span> <span class="n">m_input</span><span class="p">.</span><span class="n">find_last_of</span><span class="p">(</span> <span class="sc">&#39;.&#39;</span><span class="p">,</span> <span class="n">percent_pos</span> <span class="p">);</span>
<a name="line-80"></a>    <span class="k">auto</span> <span class="n">dot2</span> <span class="o">=</span> <span class="n">m_input</span><span class="p">.</span><span class="n">find_last_of</span><span class="p">(</span> <span class="sc">&#39;.&#39;</span><span class="p">,</span> <span class="n">dot1</span><span class="mi">-1</span> <span class="p">);</span>
<a name="line-81"></a>    <span class="k">auto</span> <span class="n">nfile_str</span> <span class="o">=</span> <span class="n">m_input</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span> <span class="n">dot2</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">dot1</span><span class="o">-</span><span class="n">dot2</span><span class="mi">-1</span>  <span class="p">);</span>
<a name="line-82"></a>    <span class="n">std</span><span class="o">::</span><span class="n">stringstream</span> <span class="n">ss</span><span class="p">(</span> <span class="n">nfile_str</span> <span class="p">);</span>
<a name="line-83"></a>    <span class="k">if</span> <span class="p">(</span><span class="n">nfile_str</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span>
<a name="line-84"></a>      <span class="n">Throw</span><span class="p">(</span> <span class="s">&quot;The percent sign must be followed by an &quot;</span>
<a name="line-85"></a>             <span class="s">&quot;integer, the number of files to aggregate&quot;</span> <span class="p">);</span>
<a name="line-86"></a>    <span class="n">std</span><span class="o">::</span><span class="kt">size_t</span> <span class="n">nfile</span><span class="p">;</span>
<a name="line-87"></a>    <span class="n">ss</span> <span class="o">&gt;&gt;</span> <span class="n">nfile</span><span class="p">;</span>
<a name="line-88"></a>    <span class="n">m_print</span><span class="p">.</span><span class="n">diag</span><span class="p">(</span> <span class="s">&quot;Aggregating &quot;</span> <span class="o">+</span> <span class="n">std</span><span class="o">::</span><span class="n">to_string</span><span class="p">(</span><span class="n">nfile</span><span class="p">)</span> <span class="o">+</span>
<a name="line-89"></a>                  <span class="s">&quot; files from base filename: &#39;&quot;</span> <span class="o">+</span> <span class="n">input_basename</span> <span class="o">+</span><span class="sc">&#39;\&#39;&#39;</span> <span class="p">);</span>
<a name="line-90"></a>
<a name="line-91"></a>    <span class="k">const</span> <span class="k">auto</span> <span class="n">eps</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">numeric_limits</span><span class="o">&lt;</span> <span class="n">tk</span><span class="o">::</span><span class="n">real</span> <span class="o">&gt;::</span><span class="n">epsilon</span><span class="p">();</span>
<a name="line-92"></a>
<a name="line-93"></a>    <span class="c1">// Lambda to echo some diagnostics on the mesh being processes to screen</span>
<a name="line-94"></a>    <span class="k">auto</span> <span class="n">diag</span> <span class="o">=</span> <span class="p">[</span><span class="o">&amp;</span><span class="p">](</span> <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">name</span><span class="p">,</span> <span class="k">const</span> <span class="n">tk</span><span class="o">::</span><span class="n">UnsMesh</span><span class="o">&amp;</span> <span class="n">mesh</span> <span class="p">){</span>
<a name="line-95"></a>      <span class="n">m_print</span><span class="p">.</span><span class="n">diag</span><span class="p">(</span> <span class="n">name</span> <span class="o">+</span> <span class="s">&quot;: ntri: &quot;</span> <span class="o">+</span>
<a name="line-96"></a>        <span class="n">std</span><span class="o">::</span><span class="n">to_string</span><span class="p">(</span><span class="n">mesh</span><span class="p">.</span><span class="n">triinpoel</span><span class="p">().</span><span class="n">size</span><span class="p">()</span><span class="o">/</span><span class="mi">3</span><span class="p">)</span> <span class="o">+</span>
<a name="line-97"></a>        <span class="s">&quot;, ntime: &quot;</span> <span class="o">+</span> <span class="n">std</span><span class="o">::</span><span class="n">to_string</span><span class="p">(</span><span class="n">mesh</span><span class="p">.</span><span class="n">vartimes</span><span class="p">().</span><span class="n">size</span><span class="p">())</span> <span class="o">+</span>
<a name="line-98"></a>        <span class="p">(</span><span class="o">!</span><span class="n">mesh</span><span class="p">.</span><span class="n">nodevars</span><span class="p">().</span><span class="n">empty</span><span class="p">()</span> <span class="o">?</span> <span class="s">&quot;, nvar: &quot;</span> <span class="o">+</span>
<a name="line-99"></a>           <span class="n">std</span><span class="o">::</span><span class="n">to_string</span><span class="p">(</span><span class="n">mesh</span><span class="p">.</span><span class="n">nodevars</span><span class="p">()[</span><span class="mi">0</span><span class="p">].</span><span class="n">size</span><span class="p">())</span> <span class="o">:</span> <span class="s">&quot;&quot;</span><span class="p">)</span> <span class="o">+</span>
<a name="line-100"></a>        <span class="p">(</span><span class="o">!</span><span class="n">mesh</span><span class="p">.</span><span class="n">nodevars</span><span class="p">()[</span><span class="mi">0</span><span class="p">].</span><span class="n">empty</span><span class="p">()</span> <span class="o">?</span> <span class="s">&quot;, npoin: &quot;</span> <span class="o">+</span>
<a name="line-101"></a>           <span class="n">std</span><span class="o">::</span><span class="n">to_string</span><span class="p">(</span><span class="n">mesh</span><span class="p">.</span><span class="n">nodevars</span><span class="p">()[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">].</span><span class="n">size</span><span class="p">())</span> <span class="o">:</span> <span class="s">&quot;&quot;</span><span class="p">)</span> <span class="p">);</span>
<a name="line-102"></a>    <span class="p">};</span>
<a name="line-103"></a>
<a name="line-104"></a>    <span class="c1">// Output-mesh containers, will store aggregated surface(s) and field output</span>
<a name="line-105"></a>    <span class="n">tk</span><span class="o">::</span><span class="n">UnsMesh</span><span class="o">::</span><span class="n">Coords</span> <span class="n">coords</span><span class="p">;</span>
<a name="line-106"></a>    <span class="k">auto</span><span class="o">&amp;</span> <span class="n">X</span> <span class="o">=</span> <span class="n">coords</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
<a name="line-107"></a>    <span class="k">auto</span><span class="o">&amp;</span> <span class="n">Y</span> <span class="o">=</span> <span class="n">coords</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
<a name="line-108"></a>    <span class="k">auto</span><span class="o">&amp;</span> <span class="n">Z</span> <span class="o">=</span> <span class="n">coords</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
<a name="line-109"></a>    <span class="n">std</span><span class="o">::</span><span class="kt">size_t</span> <span class="n">npoin</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<a name="line-110"></a>    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span> <span class="n">std</span><span class="o">::</span><span class="kt">size_t</span> <span class="o">&gt;</span> <span class="n">otriinpoel</span><span class="p">;</span>
<a name="line-111"></a>    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="o">&gt;</span> <span class="n">nodevarnames</span><span class="p">;</span>
<a name="line-112"></a>    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span> <span class="n">tk</span><span class="o">::</span><span class="n">real</span> <span class="o">&gt;</span> <span class="n">vartimes</span><span class="p">;</span>
<a name="line-113"></a>    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span> <span class="n">tk</span><span class="o">::</span><span class="n">real</span> <span class="o">&gt;</span> <span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">nodevars</span><span class="p">;</span>
<a name="line-114"></a>    <span class="c1">// Counter for number of non-empty meshes processed</span>
<a name="line-115"></a>    <span class="n">std</span><span class="o">::</span><span class="kt">size_t</span> <span class="n">k</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<a name="line-116"></a>    <span class="k">for</span> <span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="kt">size_t</span> <span class="n">m</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">m</span><span class="o">&lt;</span><span class="n">nfile</span><span class="p">;</span> <span class="o">++</span><span class="n">m</span><span class="p">)</span> <span class="p">{</span>
<a name="line-117"></a>      <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">name</span> <span class="o">=</span> <span class="n">input_basename</span> <span class="o">+</span> <span class="n">std</span><span class="o">::</span><span class="n">to_string</span><span class="p">(</span><span class="n">m</span><span class="p">);</span>
<a name="line-118"></a>      <span class="n">times</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span> <span class="p">{}</span> <span class="p">);</span>
<a name="line-119"></a>      <span class="k">auto</span> <span class="n">mesh</span> <span class="o">=</span> <span class="n">tk</span><span class="o">::</span><span class="n">readUnsMesh</span><span class="p">(</span> <span class="n">m_print</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">times</span><span class="p">.</span><span class="n">back</span><span class="p">()</span> <span class="p">);</span>
<a name="line-120"></a>      <span class="k">const</span> <span class="k">auto</span><span class="o">&amp;</span> <span class="n">triinpoel</span> <span class="o">=</span> <span class="n">mesh</span><span class="p">.</span><span class="n">triinpoel</span><span class="p">();</span>
<a name="line-121"></a>      <span class="c1">// Skip meshes with a single triange cell</span>
<a name="line-122"></a>      <span class="k">if</span> <span class="p">(</span><span class="n">triinpoel</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">==</span> <span class="mi">3</span><span class="p">)</span> <span class="k">continue</span><span class="p">;</span>
<a name="line-123"></a>      <span class="k">const</span> <span class="k">auto</span><span class="o">&amp;</span> <span class="n">x</span> <span class="o">=</span> <span class="n">mesh</span><span class="p">.</span><span class="n">x</span><span class="p">();</span>
<a name="line-124"></a>      <span class="k">const</span> <span class="k">auto</span><span class="o">&amp;</span> <span class="n">y</span> <span class="o">=</span> <span class="n">mesh</span><span class="p">.</span><span class="n">y</span><span class="p">();</span>
<a name="line-125"></a>      <span class="k">const</span> <span class="k">auto</span><span class="o">&amp;</span> <span class="n">z</span> <span class="o">=</span> <span class="n">mesh</span><span class="p">.</span><span class="n">z</span><span class="p">();</span>
<a name="line-126"></a>      <span class="n">nodevarnames</span> <span class="o">=</span> <span class="n">mesh</span><span class="p">.</span><span class="n">nodevarnames</span><span class="p">();</span>
<a name="line-127"></a>      <span class="n">vartimes</span> <span class="o">=</span> <span class="n">mesh</span><span class="p">.</span><span class="n">vartimes</span><span class="p">();</span>
<a name="line-128"></a>      <span class="c1">// Echo some diagnostics on the mesh being processes to screen</span>
<a name="line-129"></a>      <span class="n">diag</span><span class="p">(</span> <span class="n">name</span><span class="p">,</span> <span class="n">mesh</span> <span class="p">);</span>
<a name="line-130"></a>      <span class="c1">// Aggregate data from each triangle element in mesh</span>
<a name="line-131"></a>      <span class="k">for</span> <span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="kt">size_t</span> <span class="n">e</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">e</span><span class="o">&lt;</span><span class="n">triinpoel</span><span class="p">.</span><span class="n">size</span><span class="p">()</span><span class="o">/</span><span class="mi">3</span><span class="p">;</span> <span class="o">++</span><span class="n">e</span><span class="p">)</span> <span class="p">{</span>
<a name="line-132"></a>        <span class="k">for</span> <span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="kt">size_t</span> <span class="n">n</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">n</span><span class="o">&lt;</span><span class="mi">3</span><span class="p">;</span> <span class="o">++</span><span class="n">n</span><span class="p">)</span> <span class="p">{</span>
<a name="line-133"></a>          <span class="k">auto</span> <span class="n">j</span> <span class="o">=</span> <span class="n">triinpoel</span><span class="p">[</span> <span class="n">e</span><span class="o">*</span><span class="mi">3</span><span class="o">+</span><span class="n">n</span> <span class="p">];</span>
<a name="line-134"></a>          <span class="kt">bool</span> <span class="n">visited</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
<a name="line-135"></a>          <span class="c1">// WARNING: linear search below, will not scale well</span>
<a name="line-136"></a>          <span class="k">for</span> <span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="kt">size_t</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">X</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
<a name="line-137"></a>            <span class="c1">// If mesh point has already been seen (on a previous mesh)</span>
<a name="line-138"></a>            <span class="k">if</span> <span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">abs</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">-</span><span class="n">X</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">&lt;</span> <span class="n">eps</span> <span class="o">&amp;&amp;</span>
<a name="line-139"></a>                <span class="n">std</span><span class="o">::</span><span class="n">abs</span><span class="p">(</span><span class="n">y</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">-</span><span class="n">Y</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">&lt;</span> <span class="n">eps</span> <span class="o">&amp;&amp;</span>
<a name="line-140"></a>                <span class="n">std</span><span class="o">::</span><span class="n">abs</span><span class="p">(</span><span class="n">z</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">-</span><span class="n">Z</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">&lt;</span> <span class="n">eps</span><span class="p">)</span>
<a name="line-141"></a>            <span class="p">{</span> <span class="c1">// no point in connectivity but nothing else</span>
<a name="line-142"></a>              <span class="n">visited</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
<a name="line-143"></a>              <span class="n">otriinpoel</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span> <span class="n">i</span> <span class="p">);</span>
<a name="line-144"></a>            <span class="p">}</span>
<a name="line-145"></a>          <span class="p">}</span>
<a name="line-146"></a>          <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">visited</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// Mesh point not yet seen</span>
<a name="line-147"></a>            <span class="c1">// save coordinates and (global) point id in aggregated connectivity</span>
<a name="line-148"></a>            <span class="n">X</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span> <span class="n">x</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="p">);</span>
<a name="line-149"></a>            <span class="n">Y</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span> <span class="n">y</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="p">);</span>
<a name="line-150"></a>            <span class="n">Z</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span> <span class="n">z</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="p">);</span>
<a name="line-151"></a>            <span class="n">otriinpoel</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span> <span class="n">npoin</span> <span class="p">);</span>
<a name="line-152"></a>            <span class="c1">// aggregate nodal field data for all times and variables</span>
<a name="line-153"></a>            <span class="n">std</span><span class="o">::</span><span class="kt">size_t</span> <span class="n">time</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<a name="line-154"></a>            <span class="n">std</span><span class="o">::</span><span class="kt">size_t</span> <span class="n">varid</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<a name="line-155"></a>            <span class="k">for</span> <span class="p">(</span><span class="k">const</span> <span class="k">auto</span><span class="o">&amp;</span> <span class="nl">t</span> <span class="p">:</span> <span class="n">mesh</span><span class="p">.</span><span class="n">nodevars</span><span class="p">())</span> <span class="p">{</span>  <span class="c1">// for all times</span>
<a name="line-156"></a>              <span class="k">if</span> <span class="p">(</span><span class="n">k</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">npoin</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="n">nodevars</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span> <span class="p">{}</span> <span class="p">);</span>
<a name="line-157"></a>              <span class="k">for</span> <span class="p">(</span><span class="k">const</span> <span class="k">auto</span><span class="o">&amp;</span> <span class="nl">v</span> <span class="p">:</span> <span class="n">t</span><span class="p">)</span> <span class="p">{</span>              <span class="c1">// for all variables</span>
<a name="line-158"></a>                <span class="k">if</span> <span class="p">(</span><span class="n">k</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">npoin</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="n">nodevars</span><span class="p">.</span><span class="n">back</span><span class="p">().</span><span class="n">push_back</span><span class="p">(</span> <span class="p">{}</span> <span class="p">);</span>
<a name="line-159"></a>                <span class="n">nodevars</span><span class="p">[</span><span class="n">time</span><span class="p">][</span><span class="n">varid</span><span class="p">].</span><span class="n">push_back</span><span class="p">(</span> <span class="n">v</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="p">);</span>
<a name="line-160"></a>                <span class="o">++</span><span class="n">varid</span><span class="p">;</span>
<a name="line-161"></a>              <span class="p">}</span>
<a name="line-162"></a>              <span class="o">++</span><span class="n">time</span><span class="p">;</span>
<a name="line-163"></a>              <span class="n">varid</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<a name="line-164"></a>            <span class="p">}</span>
<a name="line-165"></a>            <span class="o">++</span><span class="n">npoin</span><span class="p">;</span>      <span class="c1">// increase number of nodes in output mesh</span>
<a name="line-166"></a>          <span class="p">}</span>
<a name="line-167"></a>        <span class="p">}</span>
<a name="line-168"></a>      <span class="p">}</span>
<a name="line-169"></a>      <span class="o">++</span><span class="n">k</span><span class="p">;</span>        <span class="c1">// increase number of non-empty meshes processed</span>
<a name="line-170"></a>    <span class="p">}</span>
<a name="line-171"></a>
<a name="line-172"></a>    <span class="c1">// Construct aggregated output mesh</span>
<a name="line-173"></a>    <span class="n">tk</span><span class="o">::</span><span class="n">UnsMesh</span> <span class="n">outmesh</span><span class="p">(</span> <span class="n">coords</span><span class="p">,</span> <span class="n">otriinpoel</span><span class="p">,</span> <span class="n">nodevarnames</span><span class="p">,</span> <span class="n">vartimes</span><span class="p">,</span> <span class="n">nodevars</span> <span class="p">);</span>
<a name="line-174"></a>    <span class="c1">// Echo diagnostics on the aggreegate output mesh</span>
<a name="line-175"></a>    <span class="n">diag</span><span class="p">(</span> <span class="n">m_output</span><span class="p">,</span> <span class="n">outmesh</span> <span class="p">);</span>
<a name="line-176"></a>    <span class="c1">// Write output mesh to file</span>
<a name="line-177"></a>    <span class="k">auto</span> <span class="n">wtimes</span> <span class="o">=</span> <span class="n">tk</span><span class="o">::</span><span class="n">writeUnsMesh</span><span class="p">(</span> <span class="n">m_print</span><span class="p">,</span> <span class="n">m_output</span><span class="p">,</span> <span class="n">outmesh</span><span class="p">,</span> <span class="n">m_reorder</span> <span class="p">);</span>
<a name="line-178"></a>    <span class="c1">// Collect wall-clock time data</span>
<a name="line-179"></a>    <span class="n">times</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span> <span class="n">end</span><span class="p">(</span><span class="n">times</span><span class="p">),</span> <span class="n">begin</span><span class="p">(</span><span class="n">wtimes</span><span class="p">),</span> <span class="n">end</span><span class="p">(</span><span class="n">wtimes</span><span class="p">)</span> <span class="p">);</span>
<a name="line-180"></a>
<a name="line-181"></a>  <span class="p">}</span>
<a name="line-182"></a>
<a name="line-183"></a>  <span class="n">mainProxy</span><span class="p">.</span><span class="n">timestamp</span><span class="p">(</span> <span class="n">times</span> <span class="p">);</span>
<a name="line-184"></a>
<a name="line-185"></a>  <span class="n">mainProxy</span><span class="p">.</span><span class="n">finalize</span><span class="p">();</span>
<a name="line-186"></a><span class="p">}</span>
</pre></div>
</td></tr></table>
      </div> <!-- /.wrapper -->
    </div>
    <div id="footer" class="footer">
      <p>
        Cppcheck 2.3 - a tool for static C/C++ code analysis<br>
        <br>
        Internet: <a href="http://cppcheck.net">http://cppcheck.net</a><br>
        IRC: <a href="irc://irc.freenode.net/cppcheck">irc://irc.freenode.net/cppcheck</a><br>
      </p>
    </div>
  </body>
</html>
